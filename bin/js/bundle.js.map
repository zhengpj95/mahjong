{"version":3,"file":"bundle.js","sources":["../../src/ui/layaMaxUI.ts","../../src/base/astar/AStar.ts","../../src/base/astar/AStarConst.ts","../../src/base/astar/Grid.ts","../../src/base/astar/AStarMgr.ts","../../src/base/pool/PoolManager.ts","../../src/modules/mahjong/MahjongModel.ts","../../src/modules/mahjong/MahjongProxy.ts","../../src/base/utils/ComUtils.ts","../../src/modules/mahjong/MahjongMdr.ts","../../src/GameConfig.ts","../../src/Main.ts"],"sourcesContent":["/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport View=Laya.View;\nimport Dialog=Laya.Dialog;\nimport Scene=Laya.Scene;\nvar REG: Function = Laya.ClassUtils.regClass;\nexport module ui.modules.mahjong {\n    export class MahjongUI extends Scene {\n        constructor(){ super()}\n        createChildren():void {\n            super.createChildren();\n            this.loadScene(\"modules/mahjong/Mahjong\");\n        }\n    }\n    REG(\"ui.modules.mahjong.MahjongUI\",MahjongUI);\n    export class MainInfoUI extends Scene {\n        constructor(){ super()}\n        createChildren():void {\n            super.createChildren();\n            this.loadScene(\"modules/mahjong/MainInfo\");\n        }\n    }\n    REG(\"ui.modules.mahjong.MainInfoUI\",MainInfoUI);\n}","import { Grid } from \"./Grid\";\nimport { GridPoint } from \"./AStarConst\";\n\n/**\n * 表示路径搜索中的节点信息\n */\nclass PathNode {\n  public position: GridPoint; // 当前节点的位置 [x, y]\n  public g: number;           // 从起点到当前节点的实际代价\n  public h: number;           // 当前节点到目标节点的启发式估计代价\n  public parent: PathNode | null; // 当前节点的父节点，用于回溯路径\n  public direction: GridPoint | null; // 从父节点到当前节点的移动方向\n\n  constructor(position: GridPoint, g: number, h: number, parent: PathNode | null = null, direction: GridPoint | null = null) {\n    this.position = position;\n    this.g = g;\n    this.h = h;\n    this.parent = parent;\n    this.direction = direction;\n    if (this.getTurnCount()) {\n      this.g += 1;\n    }\n  }\n\n  /**\n   * 获取节点的总代价 f = g + h\n   */\n  public get f(): number {\n    return this.g + this.h;\n  }\n\n  /**\n   * 计算当前节点的拐点数\n   */\n  public getTurnCount(): number {\n    if (!this.parent || !this.parent.direction || !this.direction) {\n      return 0; // 起点没有拐点\n    }\n    return this.direction.toString() !== this.parent.direction.toString() ? 1 : 0;\n  }\n}\n\n/**\n * A* 算法类\n */\nexport class AStar {\n  private _grid: Grid; // 网格实例\n\n  /**\n   * 构造函数\n   * @param grid - Grid 实例\n   */\n  constructor(grid: Grid) {\n    this._grid = grid;\n  }\n\n  /**\n   * 启发式函数，用于估计从某个点到目标点的代价\n   * 此处使用曼哈顿距离\n   * @param a - 当前点 [x, y]\n   * @param b - 目标点 [x, y]\n   * @returns 曼哈顿距离\n   */\n  private heuristic(a: GridPoint, b: GridPoint): number {\n    return Math.abs(a[0] - b[0]) + Math.abs(a[1] - b[1]);\n  }\n\n  /**\n   * 获取某个节点的所有邻居节点\n   * @param node - 当前节点\n   * @param end - 目标点\n   * @returns 邻居节点的位置数组和方向\n   */\n  private getNeighbors(node: PathNode, end: GridPoint): [GridPoint, GridPoint][] {\n    const [x, y] = node.position;\n    const directions: GridPoint[] = [\n      [0, 1], [1, 0], [0, -1], [-1, 0], // 上下左右四个方向\n    ];\n    const list = directions.map(([dx, dy]) => ([[x + dx, y + dy], [dx, dy]] as [GridPoint, GridPoint]));\n    return list.filter(([pos]) => end[0] === pos[0] && end[1] === pos[1]\n      ? this._grid.isInBounds(pos[0], pos[1])\n      : this._grid.isValid(pos[0], pos[1]));\n  }\n\n  /**\n   * 执行 A* 算法，查找从起点到终点的最短路径\n   * @param start - 起点 [x, y]\n   * @param end - 终点 [x, y]\n   * @returns 最短路径的数组，如果无路径则返回空数组\n   */\n  public findPath(start: GridPoint, end: GridPoint): GridPoint[] {\n    const openList: PathNode[] = [];        // 打开列表，存储待处理的节点\n    const closedSet: Set<string> = new Set(); // 关闭列表，存储已处理的节点\n\n    // 创建起点节点并加入打开列表\n    const startNode = new PathNode(start, 0, this.heuristic(start, end));\n    openList.push(startNode);\n\n    while (openList.length > 0) {\n      // 按照 f 值 + 拐点数排序，选择最优的节点\n      openList.sort((a, b) => (a.f + a.getTurnCount()) - (b.f + b.getTurnCount()));\n      const currentNode = openList.shift()!; // 当前节点\n\n      // 如果到达终点，则回溯路径\n      if (currentNode.position[0] === end[0] && currentNode.position[1] === end[1]) {\n        const path: GridPoint[] = [];\n        let node: PathNode | null = currentNode;\n        while (node) {\n          path.unshift(node.position); // 将路径反向插入\n          node = node.parent;\n        }\n        return path;\n      }\n\n      // 将当前节点标记为已处理\n      closedSet.add(currentNode.position.toString());\n\n      // 遍历当前节点的邻居\n      const neighbors = this.getNeighbors(currentNode, end);\n      for (const [neighborPos, direction] of neighbors) {\n        if (closedSet.has(neighborPos.toString())) {\n          continue; // 如果邻居已处理，跳过\n        }\n\n        const g = currentNode.g + 1; // 从起点到邻居的实际代价\n        const h = this.heuristic(neighborPos, end); // 邻居到目标的启发式代价\n        const existingNode = openList.find(\n          node => node.position[0] === neighborPos[0] && node.position[1] === neighborPos[1]\n        );\n\n        // 如果邻居节点不在打开列表或新的路径代价更低\n        if (!existingNode || g < existingNode.g) {\n          if (existingNode) {\n            // 如果邻居节点已存在，移除旧的节点\n            openList.splice(openList.indexOf(existingNode), 1);\n          }\n          // 将邻居节点加入打开列表\n          openList.push(new PathNode(neighborPos, g, h, currentNode, direction));\n        }\n      }\n    }\n\n    // 如果打开列表为空且未找到路径，则返回空数组\n    return [];\n  }\n}\n","/**\n * @date 2025/1/3\n */\n\n// 定义网格单元类型\nexport enum CellType {\n  WALKABLE = 0, // 可行走\n  OBSTACLE = 1, // 障碍\n}\n\n// 表示网格中点的坐标类型 [x, y]\nexport type GridPoint = [number, number];\n","import { CellType } from \"./AStarConst\";\n\n/**\n * Grid 类表示一个网格，在路径搜索中用于检查节点是否有效。\n */\nexport class Grid {\n  private readonly _gridData: CellType[][]; // 网格数据\n\n  /**\n   * 构造函数\n   * @param gridData - 二维数组，表示网格\n   */\n  constructor(gridData: CellType[][]) {\n    this._gridData = gridData;\n  }\n\n  /**\n   * 检查一个点是否在网格内且可通行\n   * @param x - 点的 x 坐标\n   * @param y - 点的 y 坐标\n   * @returns 如果点有效且可通行，返回 true，否则返回 false\n   */\n  public isValid(x: number, y: number): boolean {\n    return this.isInBounds(x, y) && this._gridData[x][y] === CellType.WALKABLE;\n  }\n\n  /**\n   * 判断给定坐标是否在网格边界内\n   * @param x 坐标 x\n   * @param y 坐标 y\n   * @returns 如果在边界内返回 true，否则返回 false\n   */\n  public isInBounds(x: number, y: number): boolean {\n    return x >= 0 && x < this.rows && y >= 0 && y < this.cols;\n  }\n\n  public getValue(x: number, y: number): CellType {\n    if (!this.isInBounds(x, y)) {\n      throw new Error(`Grid.getValue(${x}, ${y}) are out of bounds.`);\n    }\n    return this._gridData[x][y];\n  }\n\n  public setValue(x: number, y: number, val: CellType): boolean {\n    if (!this.isInBounds(x, y)) {\n      throw new Error(`Grid.getValue(${x}, ${y}) are out of bounds.`);\n    }\n    this._gridData[x][y] = val;\n    return true;\n  }\n\n  /**\n   * 获取网格的宽度\n   * @returns 网格的列数\n   */\n  public get cols(): number {\n    return this._gridData[0].length;\n  }\n\n  /**\n   * 获取网格的高度\n   * @returns 网格的行数\n   */\n  public get rows(): number {\n    return this._gridData.length;\n  }\n}\n","/**\n * @date 2025/1/3\n */\nimport { AStar } from \"./AStar\";\nimport { Grid } from \"./Grid\";\nimport { CellType, GridPoint } from \"./AStarConst\";\n\nexport class AStarMgr {\n  private _grid: Grid;\n  private _astar: AStar;\n\n  constructor(data: number[][]) {\n    this.createAStar(data);\n  }\n\n  private createAStar(data: number[][]): void {\n    this._grid = new Grid(data);\n    this._astar = new AStar(this._grid);\n  }\n\n  public updateGrid(point: GridPoint, value: CellType): boolean {\n    if (this._grid) {\n      return this._grid.setValue(point[0], point[1], value);\n    }\n    return false;\n  }\n\n  public findPath(start: GridPoint, end: GridPoint): GridPoint[] {\n    if (this._astar) {\n      return this._astar.findPath(start, end);\n    }\n    return [];\n  }\n}","/**\n * 对象池处理\n * @author zpj\n * @date 2025/1/4\n */\n\nfunction getQualifiedClassName(value: any) {\n  const type = typeof value;\n  if (!value || (type !== \"object\" && !value.prototype)) {\n    return type;\n  }\n\n  const prototype = value.prototype ? value.prototype : Object.getPrototypeOf(value);\n  if (prototype.hasOwnProperty(\"__class__\") && prototype[\"__class__\"]) {\n    return prototype[\"__class__\"];\n  } else if (type === \"function\" && value.name) {\n    return value.name;\n  } else if (prototype.constructor && prototype.constructor.name) {\n    return prototype.constructor.name;\n  }\n\n  const constructorString = prototype.constructor.toString().trim();\n  const index = constructorString.indexOf(\"(\");\n  const className = constructorString.substring(9, index);\n  Object.defineProperty(prototype, \"__class__\", {\n    value: className,\n    enumerable: false,\n    writable: true\n  });\n  return className;\n}\n\nconst PoolObjectName = \"__PoolObjectName__\";\n\nclass PoolManager {\n  private _poolMap: any = {};\n\n  /**\n   * @param cls\n   * @param args\n   */\n  public alloc<T>(cls: new (...params: any[]) => T, ...args: any[]): T {\n    let className = getQualifiedClassName(cls);\n    if (!this._poolMap[className]) {\n      this._poolMap[className] = [];\n    }\n\n    let list: any[] = this._poolMap[className];\n    if (list.length) {\n      let vo = list.pop();\n      if (vo[\"onAlloc\"] && typeof (vo[\"onAlloc\"]) === \"function\") {\n        vo[\"onAlloc\"]();\n      }\n      return vo;\n    }\n\n    let clazz: any = new cls(...args);\n    // 若是此对象实现了 IPoolObject 接口，则需要调用对应的 onAlloc 方法\n    if (clazz[\"onAlloc\"] && typeof (clazz[\"onAlloc\"]) === \"function\") {\n      clazz[\"onAlloc\"]();\n    }\n    clazz[`${PoolObjectName}`] = className;\n    return clazz;\n  }\n\n  /**\n   * 放入一个对象\n   * @param obj\n   */\n  public free(obj: any): boolean {\n    if (!obj) {\n      return false;\n    }\n    let refKey: string = obj[`${PoolObjectName}`];\n    // 保证只有对象池中取出来的对象才可以放进来（已经清除的无法放入）\n    if (!refKey || !this._poolMap[refKey] || this._poolMap[refKey].indexOf(obj) > -1) {\n      return false;\n    }\n    // 若是此对象实现了 IPoolObject 接口，则需要调用对应的 onRelease 方法\n    if (obj[\"onFree\"] && typeof (obj[\"onFree\"]) === \"function\") {\n      obj[\"onFree\"]();\n    }\n    this._poolMap[refKey].push(obj);\n    return true;\n  }\n\n  public clear(): void {\n    this._poolMap = {};\n  }\n\n  public getContent(): any {\n    return this._poolMap;\n  }\n\n  public setCount(count = 5): void {\n    for (let key in this._poolMap) {\n      let list: any[] = this._poolMap[key];\n      if (list.length > count) {\n        list.length = count;\n      }\n    }\n  }\n}\n\nexport const poolMgr = new PoolManager();\nif (window) {\n  window[\"poolMgr\"] = poolMgr;\n}\n","import { CardType, FengType } from \"@def/mahjong\";\nimport { AStarMgr, GridPoint } from \"@base/astar\";\nimport { PoolObject } from \"@base/pool/PoolConst\";\nimport { poolMgr } from \"@base/pool/PoolManager\";\n\n/**\n * @date 2024/12/22\n */\n\nconst CARD_COUNT = 4;\nconst CARD_NUM_LIST: number[] = [1, 2, 3, 4, 5, 6, 7, 8, 9];\nconst CARD_TYPE_LIST: CardType[] = [CardType.TONG, CardType.TIAO];\nconst FENG_TYPE_LIST: FengType[] = [FengType.ZHONG, FengType.FA];\nconst CardTypeName = {\n  [CardType.TONG]: \"tong\",\n  [CardType.WAN]: \"wan\",\n  [CardType.TIAO]: \"tiao\",\n  [CardType.FENG]: \"feng\"\n};\n// 卡牌格式 [牌类型, 牌数字]\ntype CardData = [CardType, number | FengType]\n\nexport class MahjongModel {\n  public row = 0;\n  public col = 0;\n  public data: MahjongCardData[][] = [];\n\n  private _rowColStrList: string[];\n  private _pathData: number[][] = [];\n  private _astarMgr: AStarMgr;\n  private _sameCardMap: { [key: string]: MahjongCardData[] } = {};\n\n  public updateData(row: number = 8, col: number = 10): void {\n    this.row = row;\n    this.col = col;\n    this.data = [];\n  }\n\n  // 清除当前关卡数据 todo\n  public clearData(): void {\n    this.row = 0;\n    this.col = 0;\n    this.data.length = 0;\n    this._pathData.length = 0;\n    this._astarMgr = <any>undefined;\n    this._rowColStrList = <any>undefined;\n    this._sameCardMap = {};\n  }\n\n  // 麻将牌类型集\n  private getMahjongCardList(): CardData[] {\n    const list: CardData[] = [];\n    for (let type of CARD_TYPE_LIST) {\n      for (let num of CARD_NUM_LIST) {\n        list.push([type, num]);\n      }\n    }\n    for (let feng of FENG_TYPE_LIST) {\n      list.push([CardType.FENG, feng]);\n    }\n    return list;\n  }\n\n\n  private getRowColStrList(): string[] {\n    if (!this._rowColStrList) {\n      const rst: string[] = [];\n      for (let i = 0; i < this.row; i++) {\n        for (let j = 0; j < this.col; j++) {\n          rst[i * this.col + j] = i + \"_\" + j;\n        }\n      }\n      this._rowColStrList = rst;\n    }\n    return this._rowColStrList || [];\n  }\n\n  private getRandomRowCol(): number[] {\n    const list = this.getRowColStrList();\n    const idx = Math.random() * list.length >> 0;\n    const listItem = list.splice(idx, 1)[0];\n    return listItem.split(\"_\").map(item => +item);\n  }\n\n  public getMahjongData(): MahjongCardData[][] {\n    const list = this.getMahjongCardList();\n    for (let item of list) {\n      for (let i = 0; i < CARD_COUNT; i++) {\n        const randomItemAry = this.getRandomRowCol();\n        if (!this.data[randomItemAry[0]]) {\n          this.data[randomItemAry[0]] = [];\n        }\n        const cardData = poolMgr.alloc(MahjongCardData);\n        cardData.updateInfo(randomItemAry[0], randomItemAry[1], item);\n        this.data[randomItemAry[0]][randomItemAry[1]] = cardData;\n      }\n    }\n    return this.data;\n  }\n\n  // 移除牌\n  public deleteCard(index: number): boolean {\n    const row = (index / 10 >> 0);\n    const col = index % 10;\n    if (!this.data || !this.data[row]) {\n      return false;\n    }\n    poolMgr.free(this.data[row][col]);\n    this.data[row][col] = undefined;\n    if (this._pathData.length) {\n      this._pathData[row + 1][col + 1] = 0;\n    }\n    return true;\n  }\n\n  // dfs检查是否可以消除\n  public findPath(startData: MahjongCardData, targetData: MahjongCardData): GridPoint[] {\n    if (!startData || !targetData || !startData.checkSame(targetData)) {\n      return [];\n    }\n    if (!this._astarMgr) {\n      const dfsAry: number[][] = [];\n      for (let i = 0; i < this.row + 2; i++) {\n        for (let j = 0; j < this.col + 2; j++) {\n          if (!dfsAry[i]) {\n            dfsAry[i] = [];\n          }\n          if (i === 0 || j === 0 || i === this.row + 1 || j === this.col + 1) {\n            dfsAry[i][j] = 0;\n          } else {\n            const cardData = this.data[i - 1][j - 1];\n            dfsAry[i][j] = cardData ? 1 : 0;\n          }\n        }\n      }\n      this._pathData = dfsAry;\n      this._astarMgr = new AStarMgr(this._pathData);\n    }\n    const paths = this._astarMgr.findPath([startData.row + 1, startData.col + 1], [targetData.row + 1, targetData.col + 1]);\n    return paths || [];\n  }\n\n  public canConnect(startData: MahjongCardData, targetData: MahjongCardData): boolean {\n    const paths = this.findPath(startData, targetData);\n    return !!paths.length;\n  }\n\n\n  // 根据某张牌得到相同牌的信息\n  public getConnectCardDataList(cardData: MahjongCardData): MahjongCardData[] {\n    if (!cardData) {\n      return [];\n    }\n    const cardKey = cardData.cardData.toString();\n    if (this._sameCardMap[cardKey]) {\n      return this._sameCardMap[cardKey] || [];\n    }\n    const rst: MahjongCardData[] = [];\n    for (let data of this.data) {\n      for (let item of data) {\n        if (item && item.checkSame(cardData)) {\n          rst.push(item);\n        }\n      }\n    }\n    this._sameCardMap[cardKey] = rst;\n    return rst;\n  }\n\n  // 提示可消除的牌\n  public getTipsCardDataList(): MahjongCardData[] {\n    if (!this.data.length) {\n      return [];\n    }\n    let minPath = Number.MAX_SAFE_INTEGER;\n    let rst: MahjongCardData[] = [];\n    for (let rows of this.data) {\n      for (let item of rows) {\n        if (!item) continue;// 已消除\n        const connectList = this.getConnectCardDataList(item);\n        if (!connectList.length) continue;\n        for (let card of connectList) {\n          if (!card || card.checkPos(item)) continue;\n          if (!this.data[card.row][card.col]) continue;\n          const paths = this.findPath(item, card);\n          if (!paths.length) continue;\n          if (paths.length === 2) {\n            return [item, card]; //相邻的有限\n          }\n          if (paths.length < minPath) {\n            rst = [item, card];\n            minPath = paths.length;\n          }\n        }\n      }\n    }\n    return rst;\n  }\n\n  // 剩余牌列表\n  public getLeaveCardDataList(): MahjongCardData[] {\n    return this.data.reduce((arr, item) => {\n        return arr.concat(item.filter(card => card && card.isValid()));\n      },\n      []\n    );\n  }\n\n  // 洗牌\n  public getRefreshCardDataList(): MahjongCardData[][] {\n    const list = this.getLeaveCardDataList();\n    console.log(list);\n    this._astarMgr = <any>undefined;\n    this._rowColStrList = <any>undefined;\n    this.data = [];\n    for (let i = 0; i < this.row; i++) {\n      this.data[i] = new Array(this.col).fill(undefined);\n    }\n    this._pathData = [];\n    for (let card of list) {\n      if (!card) {\n        continue;\n      }\n      const random = this.getRandomRowCol();\n      if (!this.data[random[0]]) {\n        this.data[random[0]] = new Array(this.col).fill(undefined);\n      }\n      card.updateInfo(random[0], random[1], card.cardData);\n      this.data[random[0]][random[1]] = card;\n    }\n    console.log(this.data);\n    return this.data;\n  }\n}\n\n/**单张麻将的数据*/\nexport class MahjongCardData implements PoolObject {\n  public row: number;\n  public col: number;\n  public cardData: CardData;\n\n  public updateInfo(row: number, col: number, data: CardData): void {\n    this.row = row;\n    this.col = col;\n    this.cardData = data;\n    this[\"cardName\"] = CardTypeName[data[0]] + data[1];\n  }\n\n  public isValid(): boolean {\n    return this.cardData && this.cardData.length > 0;\n  }\n\n  public getIcon(): string {\n    if (!this.cardData) {\n      return \"\";\n    }\n    return `mahjong/${CardTypeName[this.cardData[0] + \"\"] + this.cardData[1]}.png`;\n  }\n\n  public checkSame(data: MahjongCardData): boolean {\n    if (!data || !data.cardData) {\n      return false;\n    }\n    return data.cardData[0] === this.cardData[0] && data.cardData[1] === this.cardData[1];\n  }\n\n  public checkPos(data: MahjongCardData): boolean {\n    if (!data) {\n      return false;\n    }\n    return data.row === this.row && data.col === this.col;\n  }\n\n  onAlloc(): void {\n    this.row = 0;\n    this.col = 0;\n    this.cardData = <any>undefined;\n  }\n\n  onFree(): void {\n    this.onAlloc();\n  }\n}\n","import { MahjongModel } from \"./MahjongModel\";\n\n/**\n * @date 2024/12/22\n */\nexport class MahjongProxy {\n  private static _instance: MahjongProxy;\n  private _model: MahjongModel;\n\n  public static ins(): MahjongProxy {\n    if (!this._instance) {\n      this._instance = new MahjongProxy();\n      window[this._instance.constructor.name] = this._instance;\n    }\n    return this._instance;\n  }\n\n  public get model(): MahjongModel {\n    if (!this._model) {\n      this._model = new MahjongModel();\n    }\n    return this._model;\n  }\n}","import TimeLine = Laya.TimeLine;\nimport UIComponent = Laya.UIComponent;\nimport Handler = Laya.Handler;\nimport Event = Laya.Event;\n\n/**\n * @date 2024/12/23\n */\nexport default class ComUtils {\n  /** 组件抖动 */\n  public static setTween(box: UIComponent, isTween = true, callback?: Handler): TimeLine | undefined {\n    if (!box) {\n      return undefined;\n    }\n    let timeLine = <TimeLine>box[\"_timeLine_\"];\n    if (timeLine) {\n      timeLine.reset();\n      if (!isTween) {\n        timeLine.destroy();\n        return undefined;\n      }\n    } else {\n      box[\"_timeLine_\"] = timeLine = new TimeLine();\n    }\n    timeLine.to(box, { rotation: 10 }, 100)\n      .to(box, { rotation: -10 }, 100)\n      .to(box, { rotation: 5 }, 100)\n      .to(box, { rotation: -5 }, 100)\n      .to(box, { rotation: 0 }, 50)\n      .play();\n    timeLine.on(Event.COMPLETE, this, () => {\n      if (callback) {\n        callback.run();\n      }\n    });\n    return timeLine;\n  }\n\n  public static setScale(box: UIComponent, scale = 1): void {\n    if (!box) {\n      return;\n    }\n    if (box.scaleX !== scale) {\n      box.scaleX = box.scaleY = scale;\n    }\n  }\n}","import { ui } from \"@ui/layaMaxUI\";\nimport { MahjongProxy } from \"./MahjongProxy\";\nimport { MahjongCardData } from \"./MahjongModel\";\nimport ComUtils from \"@base/utils/ComUtils\";\nimport List = Laya.List;\nimport Handler = Laya.Handler;\nimport Box = Laya.Box;\nimport Image = Laya.Image;\nimport Event = Laya.Event;\nimport SoundManager = Laya.SoundManager;\nimport Button = Laya.Button;\n\ntype BoxCard = Box & {\n  boxCard: Box & {\n    img: Image;\n  }\n}\nconst INIT_SCALE = 0.4;\nconst BIG_SCALE = 0.45;\n\n/**\n * @date 2024/12/22\n */\nexport default class MahjongMdr extends ui.modules.mahjong.MahjongUI {\n  private _proxy: MahjongProxy;\n  private _list: List;\n  private _preIdx = -1;\n  private _btnTips: Button;\n  private _btnRefresh: Button;\n\n  constructor() {\n    super();\n    this._proxy = MahjongProxy.ins();\n  }\n\n  createChildren() {\n    super.createChildren();\n    this._list = <List>this.getChildByName(\"listItem\");\n    this._list.renderHandler = Handler.create(this, this.onRenderListItem, undefined, false);\n\n    this._btnTips = <Button>this.getChildByName(\"btnTips\");\n    this._btnRefresh = <Button>this.getChildByName(\"btnRefresh\");\n    this._btnTips.clickHandler = Handler.create(this, this.onBtnTips, undefined, false);\n    this._btnRefresh.clickHandler = Handler.create(this, this.onBtnRefresh, undefined, false);\n\n    Laya.loader.load(\"res/atlas/mahjong.atlas\", Laya.Handler.create(this, this.onLoadedSuccess));\n    SoundManager.autoStopMusic = false;\n    SoundManager.playMusic(\"audio/mixkit-tick-tock-clock-timer-music.wav\", 0);\n  }\n\n  onOpened(param: any) {\n    super.onOpened(param);\n  }\n\n  onClosed(type?: string) {\n    super.onClosed(type);\n    this._preIdx = -1;\n  }\n\n  private onLoadedSuccess(): void {\n    console.log(\"11111 onLoadedSuccess\");\n    this._proxy.model.updateData(8, 10);\n    const list = this._proxy.model.getMahjongData();\n    this._list.array = list.reduce((a, b) => a.concat(b));\n  }\n\n  private onRenderListItem(item: BoxCard, index: number): void {\n    const img = <Image>item.getChildByName(\"boxCard\").getChildByName(\"img\");\n    const data: MahjongCardData = item.dataSource;\n    if (!data) {\n      img.skin = \"\";\n      return;\n    }\n    item.tag = data;\n    img.skin = data.getIcon();\n    ComUtils.setScale(<BoxCard>item.getChildByName(\"boxCard\"), INIT_SCALE);\n\n    item.on(Event.CLICK, this, this.onClickItem, [index]);\n    item.on(Event.MOUSE_DOWN, this, this.onClickMouseDown, [index]);\n    item.on(Event.MOUSE_UP, this, this.onClickMouseUp, [index]);\n    item.on(Event.MOUSE_OUT, this, this.onClickMouseUp, [index]);\n  }\n\n  private onClickItem(index: number): void {\n    SoundManager.playSound(\"audio/mixkit-flop.wav\");\n    if (this._preIdx > -1 && index !== this._preIdx) {\n      const curItemData: MahjongCardData = this._list.getItem(index);\n      const preItemData: MahjongCardData = this._list.getItem(this._preIdx);\n      const curItem = <BoxCard>this._list.getCell(index).getChildByName(\"boxCard\");\n      const preItem = <BoxCard>this._list.getCell(this._preIdx).getChildByName(\"boxCard\");\n      if (curItemData.checkSame(preItemData) && this._proxy.model.canConnect(curItemData, preItemData)) {\n        ComUtils.setScale(curItem, BIG_SCALE);\n        this.clearCardItem(curItem, index);\n        this.clearCardItem(preItem, this._preIdx);\n      } else {\n        ComUtils.setScale(curItem, INIT_SCALE);\n        ComUtils.setScale(preItem, INIT_SCALE);\n      }\n      this._preIdx = -1;\n    } else {\n      this._preIdx = index;\n      const item = <BoxCard>this._list.getCell(index).getChildByName(\"boxCard\");\n      ComUtils.setScale(item, BIG_SCALE);\n    }\n  }\n\n  private clearCardItem(box: BoxCard, index: number): void {\n    const idx = index;\n    ComUtils.setTween(box, true, Handler.create(this, () => {\n      const curImg = box.getChildByName(\"img\") as Image;\n      curImg.skin = \"\";\n      this._proxy.model.deleteCard(idx);\n    }));\n  }\n\n  private onClickMouseDown(index: number): void {\n    //\n  }\n\n  private onClickMouseUp(index: number): void {\n    //\n  }\n\n  // 提示\n  private onBtnTips(): void {\n    // 检查次数，有就继续，没有则拉起广告，给予次数 todo\n    const cardList = this._proxy.model.getTipsCardDataList();\n    if (cardList.length) {\n      const cells = this._list.cells || [];\n      for (let card of cardList) {\n        const idx = card.row * this._proxy.model.col + card.col;\n        const cardItem = <BoxCard>cells[idx].getChildByName(\"boxCard\");\n        if (cardItem) {\n          ComUtils.setTween(cardItem);\n        }\n      }\n    }\n  }\n\n  // 洗牌\n  private onBtnRefresh(): void {\n    // 检查次数，有就继续，没有则拉起广告，给予次数 todo\n    const list = this._proxy.model.getRefreshCardDataList();\n    this._list.array = list.reduce((a, b) => a.concat(b));\n    this._list.refresh();\n  }\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport MahjongMdr from \"./modules/mahjong/MahjongMdr\"\n/*\n* 游戏初始化配置;\n*/\nexport default class GameConfig{\n    static width:number=640;\n    static height:number=1136;\n    static scaleMode:string=\"showall\";\n    static screenMode:string=\"none\";\n    static alignV:string=\"middle\";\n    static alignH:string=\"center\";\n    static startScene:any=\"modules/mahjong/Mahjong.scene\";\n    static sceneRoot:string=\"\";\n    static debug:boolean=false;\n    static stat:boolean=false;\n    static physicsDebug:boolean=false;\n    static exportSceneToJson:boolean=true;\n    constructor(){}\n    static init(){\n        var reg: Function = Laya.ClassUtils.regClass;\n        reg(\"modules/mahjong/MahjongMdr.ts\",MahjongMdr);\n    }\n}\nGameConfig.init();","import GameConfig from \"./GameConfig\";\nclass Main {\n\tconstructor() {\n\t\t//根据IDE设置初始化引擎\t\t\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\n\t\tLaya.stage.alignV = GameConfig.alignV;\n\t\tLaya.stage.alignH = GameConfig.alignH;\n\t\t//兼容微信不支持加载scene后缀场景\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\n\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\n\t\tif (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\n\t\tif (GameConfig.stat) Laya.Stat.show();\n\t\tLaya.alertGlobalError(true);\n\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\n\t}\n\n\tonVersionLoaded(): void {\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\n\t}\n\n\tonConfigLoaded(): void {\n\t\t//加载IDE指定的场景\n\t\tGameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\n\t}\n}\n//激活启动类\nnew Main();\n"],"names":["Event"],"mappings":"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"}