{"version":3,"file":"bundle.js","sources":["../../src/script/ClickScale.ts","../../src/script/BarProgress.ts","../../src/GameConfig.ts","../../src/base/utils/DebugUtils.ts","../../src/base/cfg/GameCfg.ts","../../src/modules/misc/view/RuleMdr.ts","../../src/modules/misc/view/TipsMdr.ts","../../src/modules/misc/cmd/ShowTipsCmd.ts","../../src/modules/misc/index.ts","../../src/base/astar/AStar.ts","../../src/base/astar/AStarConst.ts","../../src/base/astar/Grid.ts","../../src/base/astar/AStarMgr.ts","../../src/modules/mahjong/MahjongConst.ts","../../src/modules/mahjong/model/MahjongCardData.ts","../../src/modules/mahjong/model/MahjongModel.ts","../../src/platform/PlatformConst.ts","../../src/platform/Platform.ts","../../src/platform/WechatAdapter.ts","../../src/platform/WebAdapter.ts","../../src/platform/AdapterFactory.ts","../../src/platform/index.ts","../../src/modules/mahjong/model/MahjongProxy.ts","../../src/modules/mahjong/view/MahjongHomeMdr.ts","../../src/base/utils/ComUtils.ts","../../src/modules/mahjong/view/MahjongMdr.ts","../../src/modules/mahjong/view/MahjongResultMdr.ts","../../src/modules/mahjong/index.ts","../../src/modules/index.ts","../../src/base/logger.ts","../../src/Main.ts"],"sourcesContent":["import Script = Laya.Script;\nimport UIComponent = Laya.UIComponent;\nimport CallBack = base.CallBack;\n\nconst CLICK_SCALE_DOWN = 1.1;\nconst CLICK_SCALE_UP = 0.90;\nconst CLICK_SCALE_TIME = 100;\n\n/**\n * 按钮点击缩放效果\n * 不要使用约束（left,right,top,bottom,centerX,centerY）\n * @date 2025/4/25\n */\nexport default class ClickScale extends Script {\n  /** @prop {name:noScale,tips:\"点击不缩放效果,默认：false\",type:Check,default=false} */\n  public noScale = false;\n\n  private _comp: UIComponent;\n  private _width: number;\n  private _height: number;\n  private _originX: number = 0;\n  private _originY: number = 0;\n  private _originScaleX = 1; // 初始尺寸\n  private _originScaleY = 1;\n  private _isTween = false;\n\n  public onAwake(): void {\n    super.onAwake();\n    this._comp = <UIComponent>this.owner;\n    this._width = this._comp.width;\n    this._height = this._comp.height;\n    this._originX = this._comp.x;\n    this._originY = this._comp.y;\n    this._originScaleX = this._comp.scaleX;\n    this._originScaleY = this._comp.scaleY;\n    this._isTween = false;\n  }\n\n  public onEnable(): void {\n    super.onEnable();\n    this.setAnchor();\n    this._comp.on(Laya.Event.MOUSE_DOWN, this, this.onClickMouseDown);\n    this._comp.on(Laya.Event.MOUSE_UP, this, this.onClickMouseUp);\n    this._comp.on(Laya.Event.MOUSE_OUT, this, this.onClickMouseUp);\n  }\n\n  public destroy(): void {\n    super.destroy();\n  }\n\n  private setAnchor(): void {\n    if (this.noScale) return;\n    this._comp.anchorX = this._comp.anchorY = 0.5;\n    this._comp.x = this._originX + this._width * 0.5;\n    this._comp.y = this._originY + this._height * 0.5;\n  }\n\n  private onClickMouseDown(): void {\n    if (this.noScale) return;\n    this._isTween = false;\n    base.tweenMgr.remove(this._comp);\n    base.tweenMgr.get(this._comp).to({ scaleX: CLICK_SCALE_DOWN, scaleY: CLICK_SCALE_DOWN }, CLICK_SCALE_TIME);\n  }\n\n  private onClickMouseUp(): void {\n    if (this.noScale\n      || this._isTween\n      || (this._comp.scaleX === this._originScaleX &&\n        this._comp.scaleY === this._originScaleY)) {\n      return;\n    }\n    this._isTween = true;\n    base.tweenMgr.remove(this._comp);\n    base.tweenMgr.get(this._comp).to({\n      scaleX: CLICK_SCALE_UP,\n      scaleY: CLICK_SCALE_UP\n    }, CLICK_SCALE_TIME, undefined, CallBack.alloc(this, this.onMouseUpEnd));\n  }\n\n  private onMouseUpEnd(): void {\n    base.tweenMgr.remove(this._comp);\n    base.tweenMgr.get(this._comp).to({\n      scaleX: this._originScaleX,\n      scaleY: this._originScaleY\n    }, CLICK_SCALE_TIME);\n  }\n}","import Script = Laya.Script;\nimport Box = Laya.Box;\nimport Image = Laya.Image;\nimport Label = Laya.Label;\n\nfunction createImgMask(): Image {\n  const img = new Image();\n  img.skin = `modules/common/img_blank.png`;\n  img.width = img.height = 0;\n  img.sizeGrid = \"4,5,7,6\";\n  return img;\n}\n\n/**\n * 进度条\n * @date 2025/3/15\n */\nexport default class BarProgress extends Script {\n  private _imgBar: Image;\n  private _imgMask: Image;\n  private _lab: Label;\n\n  public onAwake(): void {\n    super.onAwake();\n    const owner = <Box>this.owner;\n    this._imgBar = <Image>owner.getChildByName(\"imgBar\");\n    this._lab = <Label>owner.getChildByName(\"lab\");\n    if (!this._imgMask) {\n      this._imgMask = createImgMask();\n      this._imgMask.height = this._imgBar.height;\n      this._imgBar.mask = this._imgMask;\n    }\n\n    Object.defineProperty(this.owner, \"value\", {\n      configurable: true,\n      enumerable: true,\n      get: () => {\n        return this.value;\n      },\n      set: (v: number): void => {\n        this.value = v;\n      }\n    });\n  }\n\n  public onEnable(): void {\n    super.onEnable();\n  }\n\n  public onDestroy(): void {\n    super.onDestroy();\n  }\n\n  private getImgWidth(): number {\n    if (!this._imgBar || !this._imgBar.width) {\n      const func = this._imgBar[\"_sizeChanged\"];\n      if (func) {\n        func();\n      }\n    }\n    return this._imgBar ? this._imgBar.width : 0;\n  }\n\n  public set value(val: number) {\n    if (this._imgMask && this._imgBar) {\n      const width = val * this.getImgWidth() >> 0;\n      this._imgMask.width = width;\n      this._imgBar.visible = width >= 1;\n    }\n  }\n\n  public get value(): number {\n    if (this._imgMask && this._imgBar) {\n      return this._imgMask.width / this._imgBar.width;\n    }\n    return 0;\n  }\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport ClickScale from \"./script/ClickScale\"\nimport BarProgress from \"./script/BarProgress\"\n/*\n* 游戏初始化配置;\n*/\nexport default class GameConfig{\n    static width:number=640;\n    static height:number=1136;\n    static scaleMode:string=\"showall\";\n    static screenMode:string=\"none\";\n    static alignV:string=\"middle\";\n    static alignH:string=\"center\";\n    static startScene:any=\"modules/mahjong/MahjongHome.scene\";\n    static sceneRoot:string=\"\";\n    static debug:boolean=false;\n    static stat:boolean=false;\n    static physicsDebug:boolean=false;\n    static exportSceneToJson:boolean=true;\n    constructor(){}\n    static init(){\n        var reg: Function = Laya.ClassUtils.regClass;\n        reg(\"script/ClickScale.ts\",ClickScale);\n        reg(\"script/BarProgress.ts\",BarProgress);\n    }\n}\nGameConfig.init();","/**\n * @date 2025/1/9\n */\nexport class DebugUtils {\n  public static debug(key: string, cls: any): void {\n    if (!key || !cls) {\n      return;\n    }\n    if (window) {\n      window[key] = cls;\n    }\n  }\n\n  public static debugClass(cls: any): void {\n    if (!cls) {\n      return;\n    }\n    const name = cls.constructor && cls.constructor.name;\n    if (window && name) {\n      window[name] = cls;\n    }\n  }\n\n  public static showDebug = false;\n\n  public static debugLog(str: string | number | any): void {\n    if (this.showDebug) {\n      console.log(`DebugLog: `, str);\n    }\n  }\n}\n\nDebugUtils.debug(\"DebugUtils\", DebugUtils);","import Handler = Laya.Handler;\nimport { DebugUtils } from \"@base/utils/DebugUtils\";\n\n/**\n * @author zpj\n * @date 2025/3/19\n */\nexport class GameCfg {\n  private static jsonPath = \"json/\";\n  private static jsonCfgListPath = \"json/cfglist.json\";\n  public static cfgMap: {\n    [cfgName: string]: Record<string, any>;\n  } = {};\n  public static cfgListMap: { [cfgName: string]: any[] } = {};\n\n  public static init(): void {\n    Laya.loader.load(\n      this.jsonCfgListPath,\n      Handler.create(this, this.onLoaded),\n      null,\n      Laya.Loader.JSON,\n      0,\n    );\n  }\n\n  private static onLoaded(data: string[]): void {\n    if (data && data.length) {\n      for (const jsonName of data) {\n        Laya.loader.load(\n          this.jsonPath + jsonName,\n          Handler.create(this, this.onLoadedJson, [jsonName]),\n          null,\n          Laya.Loader.JSON,\n          0,\n        );\n      }\n    }\n  }\n\n  private static onLoadedJson(jsonName: string, data: any): void {\n    // console.log(jsonName, data);\n    jsonName = jsonName.replace(\".json\", \"\");\n    this.cfgMap[jsonName] = data;\n\n    const list: any[] = [];\n    for (const key in data) {\n      list.push(data[key]);\n    }\n    this.cfgListMap[jsonName] = list;\n  }\n\n  /**获取配置列表*/\n  public static getCfgListByName<T>(cfgName: string): T[] {\n    return this.cfgListMap[cfgName] || [];\n  }\n\n  /**获取配置单项*/\n  public static getCfgByNameId<T>(cfgName: string, id: number | string): T | undefined {\n    const obj = this.cfgMap[cfgName];\n    return obj ? obj[id] : undefined;\n  }\n}\n\nDebugUtils.debug(\"GameCfg\", GameCfg);\n","import { ui } from \"@ui/layaMaxUI\";\nimport Image = Laya.Image;\nimport Label = Laya.Label;\nimport RuleUI = ui.modules.common.RuleUI;\nimport BaseMediator = base.BaseMediator;\nimport LayerIndex = base.LayerIndex;\n\n/**\n * @author zpj\n * @date 2025/4/23\n */\nexport default class RuleMdr extends BaseMediator<RuleUI> {\n  private _btnClose: Image;\n\n  constructor() {\n    super(LayerIndex.MODAL, \"modules/common/Rule.scene\");\n  }\n\n  protected addEvents(): void {\n  }\n\n  protected initUI(): void {\n  }\n\n  protected onClose(): void {\n    console.log(`11111 RuleMdr onClose`);\n  }\n\n  protected onOpen(): void {\n    const labDesc = <Label>this.ui.getChildByName(\"boxInfo\").getChildByName(\"labDesc\");\n    labDesc.text = this.params;\n    this._btnClose = <Image>this.ui.getChildByName(\"boxInfo\").getChildByName(\"btnClose\");\n    this._btnClose.once(Laya.Event.CLICK, this, this.close);\n  }\n}","import Box = Laya.Box;\nimport Label = Laya.Label;\nimport Image = Laya.Image;\nimport Timer = Laya.Timer;\nimport Tween = Laya.Tween;\nimport Handler = Laya.Handler;\nimport Sprite = Laya.Sprite;\nimport poolMgr = base.poolMgr;\nimport PoolObject = base.PoolObject;\nimport layerMgr = base.layerMgr;\nimport LayerIndex = base.LayerIndex;\n\nclass TipsItem extends Box implements PoolObject {\n  private _img: Image;\n  private _lab: Label;\n\n  public onAlloc(): void {\n    this.size(600, 35);\n    this.centerX = 0;\n    this.centerY = -100;\n    if (!this._img) {\n      this._img = new Image();\n      this._img.skin = `modules/common/img_blank.png`;\n      this._img.left = this._img.right = this._img.bottom = this._img.top = 0;\n      this._img.sizeGrid = `3,8,6,5`;\n      this.addChild(this._img);\n    }\n    if (!this._lab) {\n      this._lab = new Label();\n      this._lab.fontSize = 22;\n      this._lab.color = \"#ffffff\";\n      this._lab.centerX = 0;\n      this._lab.centerY = 1;\n      this.addChild(this._lab);\n    }\n    this.alpha = 1;\n    this._lab.text = \"\";\n  }\n\n  public onFree(): void {\n    this.alpha = 1;\n    if (this._lab) {\n      this._lab.text = \"\";\n    }\n  }\n\n  public set text(str: string) {\n    this._lab.text = str;\n  }\n\n  public execTween(): void {\n    Tween.clearAll(this);\n    Tween.to(this, { alpha: 0.8 }, 800, null, Handler.create(this, this.execTweenEnd, null, true), 800);\n  }\n\n  private execTweenEnd(): void {\n    this.removeSelf();\n    Tween.clearAll(this);\n    poolMgr.free(this);\n  }\n}\n\n/**\n * tips飘字提示\n * @author zpj\n * @date 2025/2/16\n */\nexport class TipsMdr extends Box {\n  private _sprite: Sprite;\n  private _tipsList: TipsItem[] = [];\n  private _timer: Timer;\n  private _showMaxNum = 5;\n\n  constructor() {\n    super();\n    if (!this._sprite) {\n      this._sprite = new Sprite();\n      this._sprite.size(Laya.stage.width, Laya.stage.height);\n      this.addChild(this._sprite);\n    }\n    this.size(Laya.stage.width, Laya.stage.height);\n    layerMgr.getLayer(LayerIndex.TIPS).addChild(this);\n  }\n\n  public addTips(str: string | string[]): void {\n    if (Array.isArray(str)) {\n      for (let strItem of str) {\n        const tipsItem = poolMgr.alloc(TipsItem);\n        tipsItem.text = strItem;\n        this._tipsList.push(tipsItem);\n      }\n    } else {\n      const tipsItem = poolMgr.alloc(TipsItem);\n      tipsItem.text = str;\n      this._tipsList.push(tipsItem);\n    }\n\n    if (!this._timer) {\n      this._timer = new Timer();\n      this._timer.loop(100, this, this.onUpdate);\n      this.onUpdate();\n    }\n  }\n\n  private onUpdate(): void {\n    if (!this._tipsList.length) {\n      this._timer.clearAll(this);\n      this._timer = undefined;\n      return;\n    }\n    const existSize = this._sprite.numChildren;\n    if (existSize >= this._showMaxNum) {\n      return;\n    }\n    for (let i = 0; i < existSize; i++) {\n      const item = <TipsItem>this._sprite.getChildAt(i);\n      if (item) {\n        item.y = item.y - (item.height + 5);\n      }\n    }\n    const tipsItem = this._tipsList.shift();\n    this._sprite.addChild(tipsItem);\n    tipsItem.execTween();\n  }\n}\n","import BaseCommand = base.BaseCommand;\nimport { TipsMdr } from \"../view/TipsMdr\";\n\nlet mdr: TipsMdr | undefined;\n\n/**\n * @author zpj\n * @date 2025/5/6\n */\nexport class ShowTipsCmd extends BaseCommand {\n  public exec(str: string): void {\n    if (!mdr) {\n      mdr = new TipsMdr();\n    }\n    mdr.addTips(str);\n  }\n}","import BaseModule = base.BaseModule;\nimport { ModuleType } from \"@def/module-type\";\nimport { MiscEvent, MiscViewType } from \"@def/misc\";\nimport RuleMdr from \"./view/RuleMdr\";\nimport { ShowTipsCmd } from \"./cmd/ShowTipsCmd\";\n\n/**\n * @author zpj\n * @date 2025/4/29\n */\nexport class MiscModule extends BaseModule {\n  constructor() {\n    super(ModuleType.MISC);\n  }\n\n  protected initCmd(): void {\n    this.regCmd(MiscEvent.SHOW_TIPS, ShowTipsCmd);\n  }\n\n  protected initMdr(): void {\n    this.regMdr(MiscViewType.RULE, RuleMdr);\n  }\n\n  protected initProxy(): void {\n  }\n}","import { Grid } from \"./Grid\";\nimport { GridPoint } from \"./AStarConst\";\nimport { DebugUtils } from \"@base/utils/DebugUtils\";\n\n/** 默认拐点数 */\nconst DEFAULT_TURN_COUNT = 2;\n/** 方向 */\nconst DIRECTION: number[][] = [[0, 1], [1, 0], [0, -1], [-1, 0]];\nconst DIRECTION_NAME = [\"right\", \"down\", \"left\", \"up\"];\n\n/**\n * 表示路径搜索中的节点信息\n */\nclass PathNode {\n  public position: GridPoint; // 当前节点的位置 [x, y]\n  public g: number;           // 从起点到当前节点的实际代价\n  public h: number;           // 当前节点到目标节点的启发式估计代价\n  public parent: PathNode | null; // 当前节点的父节点，用于回溯路径\n  public direction: GridPoint | null; // 从父节点到当前节点的移动方向\n\n  constructor(position: GridPoint, g: number, h: number, parent: PathNode | null = null, direction: GridPoint | null = null) {\n    this.position = position;\n    this.g = g;\n    this.h = h;\n    this.parent = parent;\n    this.direction = direction;\n  }\n\n  /**\n   * 获取节点的总代价 f = g + h\n   */\n  public get f(): number {\n    return this.g + this.h;\n  }\n\n  /**路径信息*/\n  private getPathStr(): string {\n    const list: string[] = [this.position.join(\"_\")];\n    let p = this.parent;\n    while (p) {\n      list.push(p.position.join(\"_\"));\n      p = p.parent;\n    }\n    return list.reverse().join(\",\");\n  }\n\n  /**路径信息*/\n  public get pathStr(): string {\n    return this.getPathStr();\n  }\n\n  /**方向*/\n  public get directionName(): string {\n    if (!this.direction) {\n      return \"\";\n    }\n    for (let i = 0; i < DIRECTION.length; i++) {\n      if (DIRECTION[i].toString() === this.direction.toString()) {\n        return DIRECTION_NAME[i];\n      }\n    }\n    return \"\";\n  }\n\n  /**\n   * 全部拐点数\n   */\n  public getTurnCountTotal(): number {\n    if (!this.parent || !this.parent.direction || !this.direction) {\n      return 0; // 起点没有拐点\n    }\n    let cnt = 0;\n    let p = this.parent;\n    let d = this.direction;\n    while (p && d) {\n      if (p.direction && d.toString() !== p.direction.toString()) {\n        cnt++;\n      }\n      d = p.direction;\n      p = p.parent;\n    }\n    return cnt;\n  }\n}\n\n/**\n * A* 算法类\n */\nexport class AStar {\n  private _grid: Grid; // 网格实例\n  private _turnCount: number = 0;// 拐点数\n\n  /**\n   * 构造函数\n   * @param grid - Grid 实例\n   * @param turnCnt - 拐点数，默认2\n   */\n  constructor(grid: Grid, turnCnt = DEFAULT_TURN_COUNT) {\n    this._grid = grid;\n    this._turnCount = turnCnt;\n  }\n\n  /**\n   * 启发式函数，用于估计从某个点到目标点的代价\n   * 此处使用曼哈顿距离\n   * @param a - 当前点 [x, y]\n   * @param b - 目标点 [x, y]\n   * @returns 曼哈顿距离\n   */\n  private heuristic(a: GridPoint, b: GridPoint): number {\n    return Math.abs(a[0] - b[0]) + Math.abs(a[1] - b[1]);\n  }\n\n  /**\n   * 获取某个节点的所有邻居节点\n   * @param node - 当前节点\n   * @param end - 目标点\n   * @returns 邻居节点的位置数组和方向\n   */\n  private getNeighbors(node: PathNode, end: GridPoint): [GridPoint, GridPoint][] {\n    const [x, y] = node.position;\n    const list = DIRECTION.map(([dx, dy]) => ([[x + dx, y + dy], [dx, dy]] as [GridPoint, GridPoint]));\n    return list.filter(([pos]) => end[0] === pos[0] && end[1] === pos[1]\n      ? this._grid.isInBounds(pos[0], pos[1])\n      : this._grid.isValid(pos[0], pos[1]));\n  }\n\n  /**\n   * 执行 A* 算法，查找从起点到终点的最短路径\n   * @param start - 起点 [x, y]\n   * @param end - 终点 [x, y]\n   * @returns 最短路径的数组，如果无路径则返回空数组\n   */\n  public findPath(start: GridPoint, end: GridPoint): GridPoint[] {\n    const openList: PathNode[] = [];        // 打开列表，存储待处理的节点\n    const closedSet: Set<string> = new Set(); // 关闭列表，存储已处理的节点\n    const excludeSet: Set<string> = new Set(); // 排除的路径\n\n    // 创建起点节点并加入打开列表\n    const startNode = new PathNode(start, 0, this.heuristic(start, end));\n    openList.push(startNode);\n\n    while (openList.length > 0) {\n      // 按照 f 值 + 拐点数排序，选择最优的节点\n      openList.sort((a, b) => (a.f + a.getTurnCountTotal()) - (b.f + b.getTurnCountTotal()));\n      const currentNode = openList.shift()!; // 当前节点\n      if (excludeSet.has(currentNode.pathStr)) {\n        continue;\n      }\n      DebugUtils.debugLog(currentNode.pathStr);\n\n      // 如果到达终点，则回溯路径\n      if (currentNode.position[0] === end[0] && currentNode.position[1] === end[1]) {\n        const path: GridPoint[] = [];\n        let node: PathNode | null = currentNode;\n        while (node) {\n          path.unshift(node.position); // 将路径反向插入\n          node = node.parent;\n        }\n        return path;\n      }\n\n      // 将当前节点标记为已处理\n      closedSet.add(currentNode.pathStr);\n\n      // 遍历当前节点的邻居\n      const neighborList = this.getNeighbors(currentNode, end);\n      for (const [neighbor, direction] of neighborList) {\n        const neighborPath = currentNode.pathStr + \",\" + neighbor.toString();\n        if (closedSet.has(neighborPath) || excludeSet.has(neighborPath)) {\n          continue; // 如果邻居已处理，跳过\n        }\n\n        const g = currentNode.g + 1; // 从起点到邻居的实际代价\n        const h = this.heuristic(neighbor, end); // 邻居到目标的启发式代价\n        const neighborNode = new PathNode(neighbor, g, h, currentNode, direction);\n        if (neighborNode.getTurnCountTotal() > this._turnCount) {\n          excludeSet.add(neighborPath);//排除的路径\n          continue;\n        }\n        const existingNode = openList.find(node => node.pathStr === neighborPath);\n\n        // 如果邻居节点不在打开列表或新的路径代价更低\n        if (!existingNode || g < existingNode.g) {\n          if (existingNode) {\n            // 如果邻居节点已存在，移除旧的节点\n            openList.splice(openList.indexOf(existingNode), 1);\n          }\n          // 将邻居节点加入打开列表\n          openList.push(neighborNode);\n        }\n      }\n    }\n\n    // 如果打开列表为空且未找到路径，则返回空数组\n    return [];\n  }\n}\n","/**\n * @date 2025/1/3\n */\n\n// 定义网格单元类型\nexport enum CellType {\n  WALKABLE = 0, // 可行走\n  OBSTACLE = 1, // 障碍\n}\n\n// 表示网格中点的坐标类型 [x, y]\nexport type GridPoint = [number, number];\n","import { CellType } from \"./AStarConst\";\n\n/**\n * Grid 类表示一个网格，在路径搜索中用于检查节点是否有效。\n */\nexport class Grid {\n  private readonly _gridData: CellType[][]; // 网格数据\n\n  /**\n   * 构造函数\n   * @param gridData - 二维数组，表示网格\n   */\n  constructor(gridData: CellType[][]) {\n    this._gridData = gridData;\n  }\n\n  /**\n   * 检查一个点是否在网格内且可通行\n   * @param x - 点的 x 坐标\n   * @param y - 点的 y 坐标\n   * @returns 如果点有效且可通行，返回 true，否则返回 false\n   */\n  public isValid(x: number, y: number): boolean {\n    return this.isInBounds(x, y) && this._gridData[x][y] === CellType.WALKABLE;\n  }\n\n  /**\n   * 判断给定坐标是否在网格边界内\n   * @param x 坐标 x\n   * @param y 坐标 y\n   * @returns 如果在边界内返回 true，否则返回 false\n   */\n  public isInBounds(x: number, y: number): boolean {\n    return x >= 0 && x < this.rows && y >= 0 && y < this.cols;\n  }\n\n  public getValue(x: number, y: number): CellType {\n    if (!this.isInBounds(x, y)) {\n      throw new Error(`Grid.getValue(${x}, ${y}) are out of bounds.`);\n    }\n    return this._gridData[x][y];\n  }\n\n  public setValue(x: number, y: number, val: CellType): boolean {\n    if (!this.isInBounds(x, y)) {\n      throw new Error(`Grid.getValue(${x}, ${y}) are out of bounds.`);\n    }\n    this._gridData[x][y] = val;\n    return true;\n  }\n\n  /**\n   * 获取网格的宽度\n   * @returns 网格的列数\n   */\n  public get cols(): number {\n    return this._gridData[0].length;\n  }\n\n  /**\n   * 获取网格的高度\n   * @returns 网格的行数\n   */\n  public get rows(): number {\n    return this._gridData.length;\n  }\n}\n","/**\n * @date 2025/1/3\n */\nimport { AStar } from \"./AStar\";\nimport { Grid } from \"./Grid\";\nimport { CellType, GridPoint } from \"./AStarConst\";\n\nexport class AStarMgr {\n  private _grid: Grid;\n  private _astar: AStar;\n\n  constructor(data: number[][]) {\n    this.createAStar(data);\n  }\n\n  private createAStar(data: number[][]): void {\n    this._grid = new Grid(data);\n    this._astar = new AStar(this._grid);\n  }\n\n  public updateGrid(point: GridPoint, value: CellType): boolean {\n    if (this._grid) {\n      return this._grid.setValue(point[0], point[1], value);\n    }\n    return false;\n  }\n\n  public findPath(start: GridPoint, end: GridPoint): GridPoint[] {\n    if (this._astar) {\n      return this._astar.findPath(start, end);\n    }\n    return [];\n  }\n}","import { CardType, FengType } from \"@def/mahjong\";\nimport { GameCfg } from \"@base/cfg/GameCfg\";\nimport ConfigName = config.ConfigName;\nimport CardConfig = config.CardConfig;\n\n/**\n * @author zpj\n * @date 2025/3/21\n */\n\n// 每种牌数量\nexport const CARD_COUNT = 4;\n// 非字牌的数字类型\nexport const CARD_NUM_LIST: number[] = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n// 卡牌格式 [牌类型, 牌数字]\nexport type CardData = [CardType, number | FengType]\n\nexport function getCardTypeRes(type: CardType, num: number): string {\n  const cardCfg = GameCfg.getCfgByNameId<CardConfig>(ConfigName.CARD, type);\n  return `modules/mahjong/${cardCfg.res + num}.png`;\n}\n","/**\n * @author zpj\n * @date 2025/3/21\n */\n\nimport { CardData, getCardTypeRes } from \"../MahjongConst\";\nimport { GameCfg } from \"@base/cfg/GameCfg\";\nimport ConfigName = config.ConfigName;\nimport CardConfig = config.CardConfig;\nimport PoolObject = base.PoolObject;\n\n/**单张麻将的数据*/\nexport class MahjongCardData implements PoolObject {\n  public row: number;\n  public col: number;\n  public cardData: CardData;\n\n  public updateInfo(row: number, col: number, data: CardData): void {\n    this.row = row;\n    this.col = col;\n    this.cardData = data;\n    const cardCfg = GameCfg.getCfgByNameId<CardConfig>(ConfigName.CARD, data[0]);\n    this[\"cardName\"] = cardCfg.res + data[1];\n  }\n\n  public isValid(): boolean {\n    return this.cardData && this.cardData.length > 0;\n  }\n\n  public getIcon(): string {\n    if (!this.cardData) {\n      return \"\";\n    }\n    return getCardTypeRes(this.cardData[0], this.cardData[1]);\n  }\n\n  public checkSame(data: MahjongCardData): boolean {\n    if (!data || !data.cardData) {\n      return false;\n    }\n    if (!this.isValid()) {\n      return false;\n    }\n    return data.cardData[0] === this.cardData[0] && data.cardData[1] === this.cardData[1];\n  }\n\n  public checkPos(data: MahjongCardData): boolean {\n    if (!data) {\n      return false;\n    }\n    return data.row === this.row && data.col === this.col;\n  }\n\n  onAlloc(): void {\n    this.row = 0;\n    this.col = 0;\n    this.cardData = <any>undefined;\n  }\n\n  onFree(): void {\n    this.onAlloc();\n  }\n}\n","import { CardType, IMahjongResultParam, MahjongEvent, MahjongViewType } from \"@def/mahjong\";\nimport { AStarMgr, GridPoint } from \"@base/astar\";\nimport { MahjongCardData } from \"./MahjongCardData\";\nimport { CARD_COUNT, CARD_NUM_LIST, CardData } from \"../MahjongConst\";\nimport { GameCfg } from \"@base/cfg/GameCfg\";\nimport { ModuleType } from \"@def/module-type\";\nimport ConfigName = config.ConfigName;\nimport LevelConfig = config.LevelConfig;\nimport poolMgr = base.poolMgr;\nimport eventMgr = base.eventMgr;\nimport facade = base.facade;\n\nexport const MAHJONG_LEVEL = \"mahjong_level\";\n\n/**\n * @date 2024/12/22\n */\nexport class MahjongModel {\n  public row = 0;\n  public col = 0;\n  public data: MahjongCardData[][] = [];\n\n  public level = 0;\n  public levelScore = 0;\n\n  private _rowColStrList: string[];\n  private _pathData: number[][] = [];\n  private _astarMgr: AStarMgr;\n  private _sameCardMap: { [key: string]: MahjongCardData[] } = {};\n\n  private getLevelCfg(): LevelConfig {\n    const lv = this.getNextLevel();\n    const list = GameCfg.getCfgListByName<LevelConfig>(ConfigName.LEVEl) || [];\n    if (lv >= list.length) {\n      return list[list.length - 1];\n    }\n    return GameCfg.getCfgByNameId<LevelConfig>(ConfigName.LEVEl, lv || 1);\n  }\n\n  public updateScore(score: number): void {\n    this.levelScore += score;\n    eventMgr.emit(MahjongEvent.UPDATE_SCORE);\n  }\n\n  public updateData(): void {\n    const cfg = this.getLevelCfg();\n    this.row = cfg && cfg.layout ? cfg.layout[0] : 8;\n    this.col = cfg && cfg.layout ? cfg.layout[1] : 10;\n    this.data = [];\n  }\n\n  // 清除当前关卡数据\n  public clearData(): void {\n    this.levelScore = 0;\n    this.row = 0;\n    this.col = 0;\n    this.data.length = 0;\n    this._pathData.length = 0;\n    this._astarMgr = <any>undefined;\n    this._rowColStrList = <any>undefined;\n    this._sameCardMap = {};\n  }\n\n  // 麻将牌类型集\n  private getMahjongCardList(): CardData[] {\n    const list: CardData[] = [];\n    const cardTypeList = this.getLevelCfg().cardType || [];\n    const fengTypeList = this.getLevelCfg().fengType || [];\n    for (let type of cardTypeList) {\n      for (let num of CARD_NUM_LIST) {\n        list.push([type, num]);\n      }\n    }\n    for (let feng of fengTypeList) {\n      list.push([CardType.FENG, feng]);\n    }\n    return list;\n  }\n\n  private getRowColStrList(): string[] {\n    if (!this._rowColStrList) {\n      const rst: string[] = [];\n      for (let i = 0; i < this.row; i++) {\n        for (let j = 0; j < this.col; j++) {\n          rst[i * this.col + j] = i + \"_\" + j;\n        }\n      }\n      this._rowColStrList = rst;\n    }\n    return this._rowColStrList || [];\n  }\n\n  private getRandomRowCol(): number[] {\n    const list = this.getRowColStrList();\n    const idx = Math.random() * list.length >> 0;\n    const listItem = list.splice(idx, 1)[0];\n    return listItem.split(\"_\").map(item => +item);\n  }\n\n  public getMahjongData(): MahjongCardData[][] {\n    const list = this.getMahjongCardList();\n    for (let item of list) {\n      for (let i = 0; i < CARD_COUNT; i++) {\n        const randomItemAry = this.getRandomRowCol();\n        if (!this.data[randomItemAry[0]]) {\n          this.data[randomItemAry[0]] = [];\n        }\n        const cardData = poolMgr.alloc(MahjongCardData);\n        cardData.updateInfo(randomItemAry[0], randomItemAry[1], item);\n        this.data[randomItemAry[0]][randomItemAry[1]] = cardData;\n      }\n    }\n    return this.data;\n  }\n\n  // 移除牌\n  public deleteCard(index: number): boolean {\n    const row = (index / 10 >> 0);\n    const col = index % 10;\n    if (!this.data || !this.data[row]) {\n      return false;\n    }\n    poolMgr.free(this.data[row][col]);\n    this.data[row][col] = undefined;\n    if (this._pathData.length) {\n      this._pathData[row + 1][col + 1] = 0;\n    }\n    const cnt = this.getLeaveCardDataList().length;\n    if (cnt <= 0) {\n      this.showResult();\n    }\n    return true;\n  }\n\n  // dfs检查是否可以消除\n  public findPath(startData: MahjongCardData, targetData: MahjongCardData): GridPoint[] {\n    if (!startData || !targetData || !startData.checkSame(targetData)) {\n      return [];\n    }\n    if (!this._astarMgr) {\n      const dfsAry: number[][] = [];\n      for (let i = 0; i < this.row + 2; i++) {\n        for (let j = 0; j < this.col + 2; j++) {\n          if (!dfsAry[i]) {\n            dfsAry[i] = [];\n          }\n          if (i === 0 || j === 0 || i === this.row + 1 || j === this.col + 1) {\n            dfsAry[i][j] = 0;\n          } else {\n            const cardData = this.data[i - 1][j - 1];\n            dfsAry[i][j] = cardData ? 1 : 0;\n          }\n        }\n      }\n      this._pathData = dfsAry;\n      this._astarMgr = new AStarMgr(this._pathData);\n    }\n    const paths = this._astarMgr.findPath([startData.row + 1, startData.col + 1], [targetData.row + 1, targetData.col + 1]);\n    return paths || [];\n  }\n\n  public canConnect(startData: MahjongCardData, targetData: MahjongCardData): boolean {\n    if (!startData || !targetData) {\n      return false;\n    }\n    const paths = this.findPath(startData, targetData);\n    return !!paths.length;\n  }\n\n  // 根据某张牌得到相同牌的信息\n  public getConnectCardDataList(cardData: MahjongCardData): MahjongCardData[] {\n    if (!cardData) {\n      return [];\n    }\n    const cardKey = cardData.cardData.toString();\n    if (this._sameCardMap[cardKey]) {\n      return this._sameCardMap[cardKey] || [];\n    }\n    const rst: MahjongCardData[] = [];\n    for (let data of this.data) {\n      for (let item of data) {\n        if (item && item.checkSame(cardData)) {\n          rst.push(item);\n        }\n      }\n    }\n    this._sameCardMap[cardKey] = rst;\n    return rst;\n  }\n\n  // 提示可消除的牌\n  public getTipsCardDataList(): MahjongCardData[] {\n    if (!this.data.length) {\n      return [];\n    }\n    let minPath = Number.MAX_SAFE_INTEGER;\n    let rst: MahjongCardData[] = [];\n    const checkSet = new Set<string>();\n    for (let rows of this.data) {\n      if (!rows || !rows.length) continue;\n      for (let item of rows) {\n        if (!item || !item.cardData || !item.isValid()) continue;// 已消除\n        if (checkSet.has(item.cardData.toString())) continue;\n        checkSet.add(item.cardData.toString());\n        const connectList = this.getConnectCardDataList(item);\n        if (!connectList.length) continue;\n        for (let i = 0; i < connectList.length; i++) {\n          const cardI = connectList[i];\n          if (!cardI || !cardI.isValid()) continue;\n          for (let j = i + 1; j < connectList.length; j++) {\n            const cardJ = connectList[j];\n            if (!cardJ || !cardJ.isValid()) continue;\n            const paths = this.findPath(cardI, cardJ);\n            if (!paths.length) continue;\n            if (paths.length === 2) {\n              return [cardI, cardJ];\n            }\n            if (paths.length < minPath) {\n              rst = [cardI, cardJ];\n              minPath = paths.length;\n            }\n          }\n        }\n      }\n    }\n    return rst;\n  }\n\n  // 剩余牌列表\n  public getLeaveCardDataList(): MahjongCardData[] {\n    return this.data.reduce((arr, item) => {\n        return arr.concat(item.filter(card => card && card.isValid()));\n      },\n      []\n    );\n  }\n\n  // 洗牌\n  public getRefreshCardDataList(): MahjongCardData[][] {\n    const list = this.getLeaveCardDataList();\n    this._astarMgr = <any>undefined;\n    this._rowColStrList = <any>undefined;\n    this.data = [];\n    for (let i = 0; i < this.row; i++) {\n      this.data[i] = new Array(this.col).fill(undefined);\n    }\n    this._pathData = [];\n    for (let card of list) {\n      if (!card) {\n        continue;\n      }\n      const random = this.getRandomRowCol();\n      if (!this.data[random[0]]) {\n        this.data[random[0]] = new Array(this.col).fill(undefined);\n      }\n      card.updateInfo(random[0], random[1], card.cardData);\n      this.data[random[0]][random[1]] = card;\n    }\n    return this.data;\n  }\n\n  // 关卡挑战时间\n  public getChallengeTime(): number {\n    const cfg = this.getLevelCfg();\n    if (cfg.time) {\n      return cfg.time;\n    }\n    return 90;\n  }\n\n  /**重新挑战*/\n  public challengeAgain(): void {\n    this.clearData();\n    this.updateData();\n  }\n\n  /**下一关*/\n  public showNext(): void {\n    this.clearData();\n    this.updateData();\n  }\n\n  public getNextLevel(): number {\n    return this.level + 1;\n  }\n\n  /**展示结算弹窗*/\n  public showResult(param?: IMahjongResultParam): void {\n    eventMgr.emit(MahjongEvent.SHOW_RESULT);\n    facade.openView(ModuleType.MAHJONG, MahjongViewType.RESULT, param);\n  }\n}\n","/**\n * @date 2025/3/22\n */\n\nexport enum PlatformType {\n  WX = \"wx\",\n  TT = \"tt\",\n  QQ = \"qq\",\n  WEB = \"web\",\n  UNKNOWN = \"unknown\"\n}\n\n// 平台统一接口，适配器模式\nexport interface IPlatformAdapter {\n  login?: () => void;\n  share?: () => void;\n  pay?: () => void;\n\n  readonly storage: IPlatformStorage;\n}\n\n// 缓存系统\nexport interface IPlatformStorage {\n  setItem(key: string, val: any, callback?: (success?: boolean) => void): void;\n\n  getItem<T = any>(key: string, callback?: (data?: T) => void): T;\n\n  removeItem(key: string, callback?: (success?: boolean) => void): void;\n\n  clear: () => void;\n}","/**\n * @date 2025/3/22\n */\nimport { PlatformType } from \"./PlatformConst\";\n\nexport class Platform {\n  public static get platform(): PlatformType {\n    if (typeof wx !== \"undefined\" && wx.getSystemInfoSync) {\n      return PlatformType.WX;\n    } else if (typeof window !== \"undefined\") {\n      return PlatformType.WEB;\n    } else {\n      return PlatformType.UNKNOWN;\n    }\n  }\n\n  public static get isWx(): boolean {\n    return this.platform === PlatformType.WX;\n  }\n\n  public static get isWeb(): boolean {\n    return this.platform === PlatformType.WEB;\n  }\n}","/**\n * wx\n * @date 2025/3/22\n */\nimport { IPlatformAdapter, IPlatformStorage } from \"./PlatformConst\";\n\nexport class WechatAdapter implements IPlatformAdapter {\n  private _storage: IPlatformStorage;\n  public get storage(): IPlatformStorage {\n    if (!this._storage) {\n      this._storage = new WechatPlatformStorage();\n    }\n    return this._storage;\n  }\n\n}\n\nexport class WechatPlatformStorage implements IPlatformStorage {\n  clear(): void {\n    wx.clearStorage();\n  }\n\n  getItem<T = any>(key: string, callback?: (data?: T) => void): T {\n    try {\n      wx.getStorage({\n        key: key,\n        success: (result): void => {\n          if (callback) callback(JSON.parse(result.data));\n        },\n        fail: () => {\n          if (callback) callback(undefined);\n        },\n        complete: () => {\n          //\n        }\n      });\n    } catch (e) {\n      return undefined;\n    }\n  }\n\n  removeItem(key: string, callback?: (success?: boolean) => void): void {\n    try {\n      wx.removeStorage({\n        key: key,\n        success: (): void => {\n          if (callback) callback(true);\n        },\n        fail: () => {\n          if (callback) callback(false);\n        },\n        complete: () => {\n          //\n        }\n      });\n    } catch (e) {\n      if (callback) callback(false);\n    }\n  }\n\n  setItem(key: string, val: any, callback?: (success?: boolean) => void): void {\n    try {\n      wx.setStorage({\n        key: key,\n        data: JSON.stringify(val),\n        success: (): void => {\n          if (callback) callback(true);\n        },\n        fail: () => {\n          if (callback) callback(false);\n        },\n        complete: () => {\n          //\n        }\n      });\n    } catch (e) {\n      if (callback) callback(false);\n    }\n  }\n}","/**\n * web\n * @date 2025/3/22\n */\nimport { IPlatformAdapter, IPlatformStorage } from \"./PlatformConst\";\n\nexport class WebAdapter implements IPlatformAdapter {\n  private _storage: IPlatformStorage;\n  public get storage(): IPlatformStorage {\n    if (!this._storage) {\n      this._storage = new WebPlatformStorage();\n    }\n    return this._storage;\n  }\n}\n\nexport class WebPlatformStorage implements IPlatformStorage {\n  setItem(key: string, val: any, callback?: (success?: boolean) => void): void {\n    try {\n      localStorage.setItem(key, JSON.stringify(val));\n      if (callback) {\n        callback(true);\n      }\n    } catch (e) {\n      if (callback) {\n        callback(false);\n      }\n    }\n  }\n\n  getItem<T = any>(key: string, callback?: (data?: T) => void): T {\n    try {\n      const data = localStorage.getItem(key);\n      const parsed = data ? JSON.parse(data) : null;\n      if (callback) {\n        callback(parsed);\n      }\n      return parsed;\n    } catch (e) {\n      if (callback) {\n        callback(undefined);\n      }\n      return undefined;\n    }\n  }\n\n  removeItem(key: string, callback?: (success?: boolean) => void): void {\n    try {\n      localStorage.removeItem(key);\n      if (callback) {\n        callback(true);\n      }\n    } catch (e) {\n      if (callback) {\n        callback(false);\n      }\n    }\n  }\n\n  clear(): void {\n    localStorage.clear();\n  }\n}","/**\n * @date 2025/3/22\n */\nimport { IPlatformAdapter, PlatformType } from \"./PlatformConst\";\nimport { Platform } from \"./Platform\";\nimport { WechatAdapter } from \"./WechatAdapter\";\nimport { WebAdapter } from \"./WebAdapter\";\n\nexport class AdapterFactory {\n  public static getAdapter(): IPlatformAdapter {\n    switch (Platform.platform) {\n      case PlatformType.WX:\n        return new WechatAdapter();\n      case PlatformType.WEB:\n        return new WebAdapter();\n      default:\n        throw new Error(`Unsupported platform!`);\n    }\n  }\n}","/**\n * @author zpj\n * @date 2025/4/1\n */\n\nimport { AdapterFactory } from \"./AdapterFactory\";\n\nexport const globalAdapter = AdapterFactory.getAdapter();\n","import { MAHJONG_LEVEL, MahjongModel } from \"./MahjongModel\";\nimport { globalAdapter } from \"@platform/index\";\nimport { MahjongEvent } from \"@def/mahjong\";\nimport BaseProxy = base.BaseProxy;\nimport eventMgr = base.eventMgr;\n\n/**\n * @date 2024/12/22\n */\nexport class MahjongProxy extends BaseProxy {\n  private _model: MahjongModel;\n\n  public get model(): MahjongModel {\n    if (!this._model) {\n      this._model = new MahjongModel();\n    }\n    return this._model;\n  }\n\n  public init(): void {\n    this.sMahjongInfo(); // 模拟数据下发，获取缓存关卡数据\n  }\n\n  public cMahjongSuccess(): void {\n    let lev = this.model.level + 1;\n    globalAdapter.storage.setItem(MAHJONG_LEVEL, lev, (success?: boolean) => {\n      if (success) {\n        console.log(`cMahjongSuccess setItem success: `, lev);\n      } else {\n        console.log(`cMahjongSuccess setItem fail: `, lev);\n      }\n    });\n    this.model.level += 1;// 挑战成功了，直接设置成功关卡\n  }\n\n  public sMahjongInfo(): void {\n    this.model.clearData();\n    globalAdapter.storage.getItem(MAHJONG_LEVEL, (data: number) => {\n      console.warn(`sMahjongInfo before getItem: ${this.model.level}`);\n      this.model.level = data || 0;\n      console.warn(`sMahjongInfo after getItem: ${this.model.level} ${data}`);\n      eventMgr.emit(MahjongEvent.UPDATE_INFO);\n    });\n  }\n}","import Image = Laya.Image;\nimport BaseMediator = base.BaseMediator;\nimport MahjongHomeUI = ui.modules.mahjong.MahjongHomeUI;\nimport facade = base.facade;\nimport LayerIndex = base.LayerIndex;\nimport { ui } from \"@ui/layaMaxUI\";\nimport { MahjongViewType } from \"@def/mahjong\";\nimport { ModuleType } from \"@def/module-type\";\n\n/**\n * @author zpj\n * @date 2025/1/21\n */\nexport default class MahjongHomeMdr extends BaseMediator<MahjongHomeUI> {\n  private _btnStart: Image;\n\n  constructor() {\n    super(LayerIndex.MAIN, \"modules/mahjong/MahjongHome.scene\");\n  }\n\n  protected addEvents(): void {\n    this._btnStart.on(Laya.Event.CLICK, this, this.onClickBtnStart);\n  }\n\n  protected initUI(): void {\n    this._btnStart = <Image>this.ui.getChildByName(\"btnStart\");\n  }\n\n  protected onClose(): void {\n    this.removeEvents();\n  }\n\n  protected onOpen(): void {\n    //\n  }\n\n  private removeEvents(): void {\n    this._btnStart.offAll(Laya.Event.CLICK);\n  }\n\n  private onClickBtnStart(): void {\n    facade.closeView(ModuleType.MAHJONG, MahjongViewType.HOME);\n    facade.openView(ModuleType.MAHJONG, MahjongViewType.MAIN);\n  }\n}","import TimeLine = Laya.TimeLine;\nimport UIComponent = Laya.UIComponent;\nimport Handler = Laya.Handler;\nimport Event = Laya.Event;\nimport Node = Laya.Node;\n\n/**\n * @date 2024/12/23\n */\nexport default class ComUtils {\n  /** 组件抖动 */\n  public static setTween(box: UIComponent, isTween = true, callback?: Handler): TimeLine | undefined {\n    if (!box) {\n      return undefined;\n    }\n    let timeLine = <TimeLine>box[\"_timeLine_\"];\n    if (timeLine) {\n      timeLine.reset();\n      if (!isTween) {\n        timeLine.destroy();\n        return undefined;\n      }\n    } else {\n      box[\"_timeLine_\"] = timeLine = new TimeLine();\n    }\n    timeLine.to(box, { rotation: 10 }, 100)\n      .to(box, { rotation: -10 }, 100)\n      .to(box, { rotation: 5 }, 100)\n      .to(box, { rotation: -5 }, 100)\n      .to(box, { rotation: 0 }, 50)\n      .play();\n    timeLine.on(Event.COMPLETE, this, () => {\n      if (callback) {\n        callback.run();\n      }\n    });\n    return timeLine;\n  }\n\n  public static setScale(box: UIComponent, scale = 1): void {\n    if (!box) {\n      return;\n    }\n    if (box.scaleX !== scale) {\n      box.scaleX = box.scaleY = scale;\n    }\n  }\n\n  /**根据名称获取对应组件*/\n  public static getNodeByNameList<T extends Node>(box: Node, nameList: string | string[]): T | undefined {\n    if (!box) {\n      return undefined;\n    }\n    if (Array.isArray(nameList)) {\n      let com = box;\n      while (nameList.length) {\n        const name = nameList.shift();\n        com = <UIComponent>com.getChildByName(name);\n        if (!com) {\n          console.error(`ComUtils.getNodeByNameList error: `, name);\n        }\n      }\n      return <T>com;\n    } else {\n      return <T>box.getChildByName(nameList);\n    }\n  }\n}","import { MahjongProxy } from \"../model/MahjongProxy\";\nimport ComUtils from \"@base/utils/ComUtils\";\nimport { MahjongEvent, MahjongScoreType, MahjongViewType } from \"@def/mahjong\";\nimport { MahjongCardData } from \"../model/MahjongCardData\";\nimport { BarProgressComp } from \"@script/index\";\nimport { ModuleType, ProxyType } from \"@def/module-type\";\nimport { ui } from \"@ui/layaMaxUI\";\nimport { MiscEvent, MiscViewType } from \"@def/misc\";\nimport List = Laya.List;\nimport Handler = Laya.Handler;\nimport Box = Laya.Box;\nimport Image = Laya.Image;\nimport Event = Laya.Event;\nimport SoundManager = Laya.SoundManager;\nimport Label = Laya.Label;\nimport BaseMediator = base.BaseMediator;\nimport MahjongUI = ui.modules.mahjong.MahjongUI;\nimport CallBack = base.CallBack;\nimport facade = base.facade;\nimport LayerIndex = base.LayerIndex;\nimport Point = Laya.Point;\nimport Sprite = Laya.Sprite;\nimport Tween = Laya.Tween;\n\ntype BoxRender = Box & {\n  boxCard: Box & {\n    img: Image\n  }\n}\n\ntype BoxCard = Box & {\n  img: Image\n  imgSelected: Image;\n}\n\nconst INIT_SCALE = 0.4;\nconst BIG_SCALE = 0.42;\n\nconst ruleDesc = `1.点击两张相同牌，用≤3条直线连接（可拐弯）\\n\n2.路径无阻挡即可消除\\n \n3.⚡连击加分，消除间隔越短，分数加成越高！\\n\n4.💡 用 提示（扣5分） 👉 显示可消的一对牌\\n\n5.用 洗牌（扣10分）👉 重置剩余牌位置`;\n\n/**\n * @date 2024/12/22\n */\nexport default class MahjongMdr extends BaseMediator<MahjongUI> {\n  private _proxy: MahjongProxy;\n  private _list: List;\n  private _preIdx = -1;\n  private _btnTips: Image;\n  private _btnRefresh: Image;\n  private _lastScoreTime = 0;\n  private _endTime = 0;\n  private _btnRule: Image;\n  private _btnBack: Image;\n\n  constructor() {\n    super(LayerIndex.MAIN, \"modules/mahjong/Mahjong.scene\");\n  }\n\n  protected addEvents(): void {\n    this.on(MahjongEvent.UPDATE_INFO, this.onRefreshNext, this);\n    this.on(MahjongEvent.UPDATE_NEXT, this.onRefreshNext, this);\n    this.on(MahjongEvent.SHOW_RESULT, this.showResultToClear, this);\n    this.on(MahjongEvent.UPDATE_SCORE, this.updateScore, this);\n  }\n\n  protected initUI(): void {\n    this._proxy = base.facade.getProxy(ModuleType.MAHJONG, ProxyType.MAHJONG);\n\n    this._list = <List>this.ui.getChildByName(\"listItem\");\n    this._list.renderHandler = Handler.create(this, this.onRenderListItem, undefined, false);\n\n    this._btnTips = <Image>this.ui.getChildByName(\"btnTips\");\n    this._btnRefresh = <Image>this.ui.getChildByName(\"btnRefresh\");\n    this._btnTips.on(Laya.Event.CLICK, this, this.onBtnTips);\n    this._btnRefresh.on(Laya.Event.CLICK, this, this.onBtnRefresh);\n\n    this._btnRule = <Image>this.ui.getChildByName(\"btnRule\");\n    this._btnRule.on(Laya.Event.CLICK, this, this.onClickRule);\n\n    this._btnBack = <Image>this.ui.getChildByName(\"btnBack\");\n    this.onLaya(this._btnBack, Event.CLICK, this.onClickBack);\n  }\n\n  protected onOpen(): void {\n    console.log(`11111 MahjongMdr onOpen`);\n    this._proxy.model.clearData();\n    this.onRefreshNext();\n  }\n\n  protected onClose(): void {\n    console.log(`11111 MahjongMdr onClose`);\n    this._preIdx = -1;\n    this._btnTips.off(Laya.Event.CLICK, this, this.onBtnTips);\n    this._btnRefresh.off(Laya.Event.CLICK, this, this.onBtnRefresh);\n    this.removeEvents();\n\n    const bar = <BarProgressComp>this.ui.getChildByName(\"bar\");\n    base.tweenMgr.remove(bar);\n    Tween.clearAll(this);\n    Laya.timer.clearAll(this);\n  }\n\n  private removeEvents(): void {\n    this.off(MahjongEvent.UPDATE_INFO, this.onRefreshNext, this);\n    this.off(MahjongEvent.UPDATE_NEXT, this.onRefreshNext, this);\n    this.off(MahjongEvent.SHOW_RESULT, this.showResultToClear, this);\n    this.off(MahjongEvent.UPDATE_SCORE, this.updateScore, this);\n  }\n\n  private onRefreshNext(): void {\n    console.warn(`11111 onRefreshNext cLv:${this._proxy.model.level}, nLv:${this._proxy.model.getNextLevel()}`);\n    this._proxy.model.showNext();\n\n    this.resetScore();\n    this.updateLevel();\n    const list = this._proxy.model.getMahjongData();\n    this._list.array = list.reduce((a, b) => a.concat(b));\n    this.updateBar();\n  }\n\n  private updateBar(): void {\n    const now = Date.now() / 1000 >> 0;\n    this._endTime = now + this._proxy.model.getChallengeTime();\n    const bar = <BarProgressComp>this.ui.getChildByName(\"bar\");\n    bar.value = 1;\n    base.tweenMgr.remove(bar);\n    base.tweenMgr.get(bar).to({ value: 0 }, (this._endTime - now) * 1000, null, CallBack.alloc(this, this.onTimeOut, true));\n  }\n\n  // 展示结算弹窗时候，清除操作\n  private showResultToClear(): void {\n    const bar = <Box>this.ui.getChildByName(\"bar\");\n    base.tweenMgr.remove(bar);\n  }\n\n  // 失败结束\n  private onTimeOut(): void {\n    this._proxy.model.showResult({ type: 1 });\n  }\n\n  private onRenderListItem(item: BoxRender, index: number): void {\n    const boxCard = <BoxCard>item.getChildByName(\"boxCard\");\n    const img = ComUtils.getNodeByNameList<Image>(boxCard, [\"img\"]);\n    const data: MahjongCardData = item.dataSource;\n    if (!data) {\n      img.skin = \"\";\n      return;\n    }\n    item.tag = data;\n    img.skin = data.getIcon();\n    ComUtils.setScale(boxCard, INIT_SCALE);\n    this.setSelect(boxCard, false);\n\n    item.on(Event.CLICK, this, this.onClickItem, [index]);\n  }\n\n  private onClickItem(index: number): void {\n    if (this._preIdx > -1 && index === this._preIdx) {\n      // 同一个牌，则清除\n      const boxCard = <BoxCard>this._list.getCell(index).getChildByName(\"boxCard\");\n      this._preIdx = -1;\n      ComUtils.setScale(boxCard, INIT_SCALE);\n      this.setSelect(boxCard, false);\n      return;\n    }\n\n    SoundManager.playSound(\"audio/mixkit-flop.wav\");\n    if (this._preIdx > -1 && index !== this._preIdx) {\n      const curItemData: MahjongCardData = this._list.getItem(index);\n      const preItemData: MahjongCardData = this._list.getItem(this._preIdx);\n      const curItem = <BoxCard>this._list.getCell(index).getChildByName(\"boxCard\");\n      const preItem = <BoxCard>this._list.getCell(this._preIdx).getChildByName(\"boxCard\");\n      const paths = this._proxy.model.findPath(preItemData, curItemData);\n      if (curItemData && curItemData.checkSame(preItemData) && !!paths.length) {\n        ComUtils.setScale(curItem, BIG_SCALE);\n        this.clearCardItem(curItem, index);\n        this.setSelect(curItem, true);\n        this.clearCardItem(preItem, this._preIdx);\n        this.addScore();\n        const p = paths.map(item => {\n          return { x: item[1] - 1, y: item[0] - 1 };\n        });\n        this.animateDrawLine(p);\n        this.createGlowEffect(p);\n      } else {\n        ComUtils.setScale(curItem, INIT_SCALE);\n        ComUtils.setScale(preItem, INIT_SCALE);\n        this.setSelect(curItem, false);\n        this.setSelect(preItem, false);\n      }\n      this._preIdx = -1;\n    } else {\n      const item = this._list.getCell(index);\n      const cardData = <MahjongCardData>item.dataSource;\n      if (!cardData || !cardData.isValid()) {\n        this._preIdx = -1;\n        return;\n      }\n      this._preIdx = index;\n      const boxCard = <BoxCard>item.getChildByName(\"boxCard\");\n      ComUtils.setScale(boxCard, BIG_SCALE);\n      this.setSelect(boxCard, true);\n    }\n  }\n\n  private updateLevel(): void {\n    const lab = <Label>this.ui.getChildByName(\"labLevel\");\n    lab.text = \"关卡：\" + this._proxy.model.getNextLevel();\n  }\n\n  private addScore(): void {\n    const now = Date.now();\n    const diffTime = now - this._lastScoreTime;\n    let score = 1; // 消除间隔不同，加分不同\n    if (diffTime < 2 * 1000) {\n      score = 5;\n    } else if (diffTime < 5 * 1000) {\n      score = 3;\n    }\n    this._lastScoreTime = now;\n    this._proxy.model.updateScore(score);\n    this.updateScore();\n  }\n\n  private updateScore(): void {\n    const lab = ComUtils.getNodeByNameList<Label>(this.ui, [\"boxScore\", \"lab\"]);\n    lab.text = this._proxy.model.levelScore + \"\";\n    lab.color = this._proxy.model.levelScore > 0 ? \"#42e422\" : \"#ff4646\";\n  }\n\n  private resetScore(): void {\n    this._lastScoreTime = 0;\n    const lab = ComUtils.getNodeByNameList<Label>(this.ui, [\"boxScore\", \"lab\"]);\n    lab.text = \"0\";\n  }\n\n  private clearCardItem(box: BoxCard, index: number): void {\n    const idx = index;\n    ComUtils.setTween(box, true, Handler.create(this, () => {\n      const curImg = box.getChildByName(\"img\") as Image;\n      curImg.skin = \"\";\n      const imgSel = box.getChildByName(\"imgSelected\") as Image;\n      imgSel.visible = false;\n      this._proxy.model.deleteCard(idx);\n    }));\n  }\n\n  private setSelect(boxCard: BoxCard, isSel = false): void {\n    const imgSel = ComUtils.getNodeByNameList<Image>(boxCard, [\"imgSelected\"]);\n    if (imgSel) imgSel.visible = isSel;\n  }\n\n  // 提示\n  private onBtnTips(): void {\n    // 检查次数，有就继续，没有则拉起广告，给予次数 todo\n    const cardList = this._proxy.model.getTipsCardDataList();\n    if (cardList.length) {\n      const cells = this._list.cells || [];\n      for (let card of cardList) {\n        const idx = card.row * this._proxy.model.col + card.col;\n        const cardItem = <BoxCard>cells[idx].getChildByName(\"boxCard\");\n        if (cardItem) {\n          ComUtils.setTween(cardItem);\n        }\n      }\n    } else {\n      this.emit(MiscEvent.SHOW_TIPS, \"无可消除的卡牌，请洗牌!\");\n    }\n    this._proxy.model.updateScore(-MahjongScoreType.TIPS);\n  }\n\n  // 洗牌\n  private onBtnRefresh(): void {\n    // 检查次数，有就继续，没有则拉起广告，给予次数 todo\n    const list = this._proxy.model.getRefreshCardDataList();\n    this._list.array = list.reduce((a, b) => a.concat(b));\n    this._list.refresh();\n    this.emit(MiscEvent.SHOW_TIPS, \"洗牌成功!\");\n    this._proxy.model.updateScore(-MahjongScoreType.REFRESH);\n  }\n\n  private onClickRule(): void {\n    facade.openView(ModuleType.MISC, MiscViewType.RULE, ruleDesc);\n  }\n\n  private onClickBack(): void {\n    this.close();\n    facade.openView(ModuleType.MAHJONG, MahjongViewType.HOME);\n  }\n\n  private _lineSprite: Sprite;\n  private _glowSprite: Sprite;\n\n  private animateDrawLine(path: { x: number, y: number }[], color: string = \"#42e422\"): void {\n    const tileWidth = 52;\n    const tileHeight = 70;\n    const offsetX = tileWidth / 2;\n    const offsetY = tileHeight / 2;\n    if (!this._lineSprite) {\n      this._lineSprite = new Laya.Sprite();\n      this._lineSprite.width = Laya.stage.width;\n      this._lineSprite.height = Laya.stage.height;\n    }\n    this.ui.addChild(this._lineSprite);\n\n    let i = 0;\n    const lineLayer = this._lineSprite;\n    const gPoint = Point.create();\n    gPoint.x = this._list.x;\n    gPoint.y = this._list.y;\n    const time = path.length >= 10 ? 15 : path.length >= 5 ? 30 : 120;\n\n    function drawNextSegment(): void {\n      if (i >= path.length - 1) {\n        // 所有段绘制完成后清除\n        Laya.timer.once(100, this, () => {\n          lineLayer.removeSelf();\n          lineLayer.removeChildren();\n        });\n        return;\n      }\n\n      const from = path[i];\n      const to = path[i + 1];\n\n      const fromX = gPoint.x + from.x * tileWidth + offsetX + 4 + from.x * 3;\n      const fromY = gPoint.y + from.y * tileHeight + offsetY + 4 + from.y * 3;\n      const toX = gPoint.x + to.x * tileWidth + offsetX + 4 + to.x * 3;\n      const toY = gPoint.y + to.y * tileHeight + offsetY + 4 + to.y * 3;\n\n      // 模拟绘制动画（线条从 from 到 to）\n      const progress = { x: fromX, y: fromY };\n\n      const tempLine = new Laya.Sprite();\n      lineLayer.addChild(tempLine);\n\n      Laya.Tween.to(progress, { x: toX, y: toY }, time, this, Laya.Handler.create(null, () => {\n        i++;\n        drawNextSegment();\n      }), 0, true); // true 表示使用帧率模式\n\n      // 每帧重绘当前段的动态线条\n      tempLine.frameLoop(1, null, () => {\n        tempLine.graphics.clear();\n        tempLine.graphics.drawLine(fromX, fromY, progress.x, progress.y, color, 5);\n      });\n    }\n\n    drawNextSegment();\n  }\n\n\n  private createGlowEffect(path: { x: number, y: number }[]): void {\n    if (!this._glowSprite) {\n      this._glowSprite = new Laya.Sprite();\n      this._glowSprite.alpha = 1;\n      this._glowSprite.width = this._glowSprite.height = 1;\n      this._glowSprite.name = \"glow\";\n    }\n    this._glowSprite.graphics.drawCircle(0, 0, 10, \"#FFFF00\"); // 黄色发光球\n    this.ui.addChild(this._glowSprite);\n\n    const tileWidth = 52;\n    const tileHeight = 70;\n    const offsetX = tileWidth / 2;\n    const offsetY = tileHeight / 2;\n    const gPoint = Point.create();\n    gPoint.x = this._list.x;\n    gPoint.y = this._list.y;\n\n    const points: Laya.Point[] = path.map(p => new Laya.Point(\n      gPoint.x + p.x * tileWidth + offsetX + 4 + p.x * 3,\n      gPoint.y + p.y * tileHeight + offsetY + 4 + p.y * 3)\n    );\n    let index = 0;\n    const glow = this._glowSprite;\n    const time = path.length >= 10 ? 15 : path.length >= 5 ? 30 : 120;\n\n    function moveNext(): void {\n      if (index >= points.length - 1) {\n        glow.removeSelf();\n        return;\n      }\n\n      const from = points[index];\n      const to = points[index + 1];\n      glow.pos(from.x, from.y);\n      Laya.Tween.to(glow, { x: to.x, y: to.y }, time, this, Laya.Handler.create(null, () => {\n        index++;\n        moveNext();\n      }));\n    }\n\n    moveNext();\n  }\n}","import { ui } from \"@ui/layaMaxUI\";\nimport { IMahjongResultParam, MahjongEvent, MahjongViewType } from \"@def/mahjong\";\nimport { MahjongProxy } from \"../model/MahjongProxy\";\nimport ComUtils from \"@base/utils/ComUtils\";\nimport { ModuleType, ProxyType } from \"@def/module-type\";\nimport Label = Laya.Label;\nimport MahjongResultUI = ui.modules.mahjong.MahjongResultUI;\nimport eventMgr = base.eventMgr;\nimport BaseMediator = base.BaseMediator;\nimport facade = base.facade;\nimport LayerIndex = base.LayerIndex;\n\n/**\n * 结算弹窗\n * @date 2025/1/19\n */\nexport default class MahjongResultMdr extends BaseMediator<MahjongResultUI> {\n  private _lab: Label;\n  private _proxy: MahjongProxy;\n  private _param?: IMahjongResultParam;\n\n  constructor() {\n    super(LayerIndex.MODAL, \"modules/mahjong/MahjongResult.scene\");\n  }\n\n  protected addEvents(): void {\n  }\n\n  protected initUI(): void {\n  }\n\n  protected onClose(): void {\n    this.removeEvents();\n  }\n\n  protected onOpen(): void {\n    this._proxy = base.facade.getProxy(ModuleType.MAHJONG, ProxyType.MAHJONG);\n    this._param = this.params;\n\n    this._lab = ComUtils.getNodeByNameList<Label>(this.ui, [\"boxHtml\", \"lab\"]);\n    this.ui.btnHome.on(Laya.Event.CLICK, this, this.onClickHome);\n    this.ui.btnNext.on(Laya.Event.CLICK, this, this.onClickNext);\n\n    const btnNextLab = <Label>this.ui.btnNext.getChildByName(\"lab\");\n    if (!this._param || !this._param.type) {\n      this._lab.text = `得分: ` + this._proxy.model.levelScore;\n      btnNextLab.text = `下一关`;\n      this._proxy.cMahjongSuccess();\n    } else {\n      this._lab.text = `挑战时间已到，挑战失败！`;\n      btnNextLab.text = `重新挑战`;\n    }\n  }\n\n  private removeEvents(): void {\n    this.ui.btnHome.off(Laya.Event.CLICK, this, this.onClickHome);\n    this.ui.btnNext.off(Laya.Event.CLICK, this, this.onClickNext);\n  }\n\n  private onClickHome(): void {\n    console.warn(\"MahjongResultMdr.onClickHome...\");\n    facade.openView(ModuleType.MAHJONG, MahjongViewType.HOME);\n    facade.closeView(ModuleType.MAHJONG, MahjongViewType.MAIN);\n    this.close();\n  }\n\n  private onClickNext(): void {\n    const challengeAgain = this._param && this._param.type === 1;\n    console.warn(`MahjongResultMdr.onClickNext... challengeAgain:${challengeAgain}`);\n    eventMgr.emit(MahjongEvent.UPDATE_NEXT, challengeAgain); // true 是重新挑战\n    this.close();\n  }\n\n  public close(): void {\n    super.close();\n  }\n}","import BaseModule = base.BaseModule;\nimport { ModuleType, ProxyType } from \"@def/module-type\";\nimport { MahjongProxy } from \"./model/MahjongProxy\";\nimport { MahjongViewType } from \"@def/mahjong\";\nimport MahjongHomeMdr from \"./view/MahjongHomeMdr\";\nimport MahjongMdr from \"./view/MahjongMdr\";\nimport MahjongResultMdr from \"./view/MahjongResultMdr\";\n\n/**\n * @author zpj\n * @date 2025/4/29\n */\nexport class MahjongModule extends BaseModule {\n  constructor() {\n    super(ModuleType.MAHJONG);\n  }\n\n  protected initCmd(): void {\n  }\n\n  protected initMdr(): void {\n    this.regMdr(MahjongViewType.HOME, MahjongHomeMdr);\n    this.regMdr(MahjongViewType.MAIN, MahjongMdr);\n    this.regMdr(MahjongViewType.RESULT, MahjongResultMdr);\n  }\n\n  protected initProxy(): void {\n    this.regProxy(ProxyType.MAHJONG, MahjongProxy);\n  }\n\n}","import { MiscModule } from \"./misc/index\";\nimport { MahjongModule } from \"./mahjong/index\";\n\n/**\n * @author zpj\n * @date 2025/4/29\n */\nfunction regModules(): void {\n  base.facade.push(MiscModule);\n  base.facade.push(MahjongModule);\n}\n\n// 实例化所有模块\nfunction insModules(): void {\n  base.facade.instantiate();\n}\n\nexport function initModules(): void {\n  console.log(`[开始初始化模块]`);\n  regModules();\n  insModules();\n}\n","/**\n * @author zpj\n * @date 2025/4/29\n */\n\ntype LogLevel = \"log\" | \"info\" | \"warn\" | \"error\" | \"debug\";\n\nconst LOG_LEVEL_ORDER: Record<LogLevel, number> = {\n  log: 1,\n  info: 2,\n  warn: 3,\n  error: 4,\n  debug: 5,\n};\n\nconst LEVEL_ICON: Record<LogLevel, string> = {\n  log: \"📘\",\n  info: \"ℹ️\",\n  warn: \"⚠️\",\n  error: \"❌\",\n  debug: \"🐞\",\n};\n\nconst LEVEL_STYLES: Record<LogLevel, { color: string; background?: string }> = {\n  debug: { color: \"white\", background: \"purple\" },\n  log: { color: \"black\", background: \"#e0e0e0\" },\n  info: { color: \"white\", background: \"deepskyblue\" },\n  warn: { color: \"black\", background: \"gold\" },\n  error: { color: \"white\", background: \"crimson\" },\n};\n\n// 设置当前日志等级过滤\nconst FILTER_LEVEL = \"warn\";\n\nfunction pad(n: number, len = 2, prefix = \"0\"): string {\n  const str = prefix.repeat(len) + n.toString();\n  return str.slice(-len);\n}\n\nfunction padString(n: string, len = 5, prefix = \" \"): string {\n  const nLen = n.length;\n  const difLen = len - nLen;\n  return prefix.repeat(Math.ceil(difLen / 2)) + n + prefix.repeat(Math.floor(difLen / 2));\n}\n\nfunction getTimestamp(): string {\n  const now = new Date();\n  return `[${now.getFullYear()}-${pad(now.getMonth() + 1)}-${pad(now.getDate())} ` +\n    `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}.${pad(now.getMilliseconds(), 3)}]`;\n}\n\nfunction wrapConsoleMethod(originalMethod: (...args: any[]) => void, color: string = \"\", name = \"\"): (...args: any[]) => void {\n  return (...args: any[]) => {\n    const logLevel = name || originalMethod.name;\n    if (LOG_LEVEL_ORDER[logLevel] > LOG_LEVEL_ORDER[FILTER_LEVEL]) {\n      return undefined;\n    }\n    const timestamp = getTimestamp();\n    const logName = padString(logLevel, 5, \" \");\n    const icon = LEVEL_ICON[logLevel] || \"\";\n    const prefix = `${timestamp}`;\n    const style = color ? `background: ${color}; padding: 2px 4px; border-radius: 3px;` : \"\";\n    originalMethod.call(console, `%c${logName}`, style, icon, prefix, ...args);\n  };\n}\n\nlet _originalMethods: Partial<Record<keyof Console, (...args: any[]) => void>> = {};\n\nexport function initEnhancedConsole(): void {\n  if (!_originalMethods.log) {\n    // 备份原始方法\n    _originalMethods.log = console.log;\n    _originalMethods.warn = console.warn;\n    _originalMethods.error = console.error;\n    _originalMethods.info = console.info;\n    _originalMethods.debug = console.debug;\n\n    // 重写\n    console.warn = wrapConsoleMethod(console.log, \"gold\", \"warn\"); // 用log来处理warn，去掉warn默认的一整行都有颜色的默认处理\n    console.error = wrapConsoleMethod(console.log, \"red\", \"error\");// 同上\n\n    console.info = wrapConsoleMethod(console.info, \"deepskyblue\");\n    console.debug = wrapConsoleMethod(console.debug, \"violet\");\n    console.log = wrapConsoleMethod(console.log, \"#909090\");\n  }\n}\n\nexport function restoreOriginalConsole(): void {\n  if (_originalMethods.log) {\n    // 还原\n    console.log = _originalMethods.log!;\n    console.warn = _originalMethods.warn!;\n    console.error = _originalMethods.error!;\n    console.info = _originalMethods.info!;\n    console.debug = _originalMethods.debug!;\n    _originalMethods = {};\n  }\n}\n","import GameConfig from \"./GameConfig\";\nimport { GameCfg } from \"@base/cfg/GameCfg\";\nimport { initModules } from \"./modules/index\";\nimport { initEnhancedConsole } from \"@base/logger\";\nimport { ModuleType } from \"@def/module-type\";\nimport { MahjongViewType } from \"@def/mahjong\";\nimport facade = base.facade;\n\nclass Main {\n  constructor() {\n    //根据IDE设置初始化引擎\n    if (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\n    else Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\n    Laya[\"Physics\"] && Laya[\"Physics\"].enable();\n    Laya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\n    Laya.stage.scaleMode = GameConfig.scaleMode;\n    Laya.stage.screenMode = GameConfig.screenMode;\n    Laya.stage.alignV = GameConfig.alignV;\n    Laya.stage.alignH = GameConfig.alignH;\n    //兼容微信不支持加载scene后缀场景\n    Laya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\n\n    //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\n    if (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\n    if (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\n    if (GameConfig.stat) Laya.Stat.show();\n    Laya.alertGlobalError(true);\n    initEnhancedConsole();\n\n    //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\n    Laya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\n\n    initLoop();\n    base.baseInit();\n    initModules();\n    GameCfg.init();\n  }\n\n  onVersionLoaded(): void {\n    //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\n    Laya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\n  }\n\n  onConfigLoaded(): void {\n    //加载IDE指定的场景\n    facade.openView(ModuleType.MAHJONG, MahjongViewType.HOME);\n    // GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\n  }\n}\n\nlet _lastLoop = 0;\nlet _rawLoop: () => boolean;\nlet stage: {\n  _loop: () => boolean;\n};\n\nconst enum UpdateFrame {\n  FAST = 16,\n  SLOW = 33,\n  SLEEP = 1000,\n}\n\nfunction _loop(): boolean {\n  const now = Date.now();\n  const elapsed = now - _lastLoop;\n  if (elapsed < UpdateFrame.SLOW) {\n    return false;\n  }\n  _lastLoop = now;\n  try {\n    if (_rawLoop) {\n      _rawLoop.call(Laya.stage);\n    }\n  } catch (e) {\n    console.log(e);\n  }\n  base.baseLoop();\n  return true;\n}\n\nfunction initLoop(): void {\n  stage = <any>Laya.stage;\n  _rawLoop = stage._loop;\n  stage._loop = _loop;\n}\n\nsetInterval(_bgLoop, 1);\n\nfunction _bgLoop(): void {\n  const now = Date.now();\n  const elapsed = now - _lastLoop;\n  if (elapsed < UpdateFrame.SLOW * 1.5) {\n    return;\n  }\n  _loop();\n}\n\n//激活启动类\nnew Main();\n"],"names":["Script","Image","Handler","poolMgr","eventMgr","BaseMediator","facade","Event","CallBack","Tween","BaseModule"],"mappings":"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"}