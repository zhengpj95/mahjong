{"version":3,"file":"bundle.js","sources":["../../src/ui/layaMaxUI.ts","../../src/modules/mahjong/MahjongModel.ts","../../src/modules/mahjong/MahjongProxy.ts","../../src/base/utils/ComUtils.ts","../../src/modules/mahjong/MahjongMdr.ts","../../src/GameConfig.ts","../../src/Main.ts"],"sourcesContent":["/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport View=Laya.View;\nimport Dialog=Laya.Dialog;\nimport Scene=Laya.Scene;\nvar REG: Function = Laya.ClassUtils.regClass;\nexport module ui.modules.mahjong {\n    export class MahjongUI extends Scene {\n        constructor(){ super()}\n        createChildren():void {\n            super.createChildren();\n            this.loadScene(\"modules/mahjong/Mahjong\");\n        }\n    }\n    REG(\"ui.modules.mahjong.MahjongUI\",MahjongUI);\n    export class MainInfoUI extends Scene {\n        constructor(){ super()}\n        createChildren():void {\n            super.createChildren();\n            this.loadScene(\"modules/mahjong/MainInfo\");\n        }\n    }\n    REG(\"ui.modules.mahjong.MainInfoUI\",MainInfoUI);\n}","import { CardType, FengType } from \"@def/mahjong\";\n\n/**\n * @date 2024/12/22\n */\n\nconst CARD_COUNT = 4;\nconst CARD_NUM_LIST: number[] = [1, 2, 3, 4, 5, 6, 7, 8, 9];\nconst CARD_TYPE_LIST: CardType[] = [CardType.TONG, CardType.TIAO];\nconst FENG_TYPE_LIST: FengType[] = [FengType.ZHONG, FengType.FA];\nconst CardTypeName = {\n  [CardType.TONG]: \"tong\",\n  [CardType.WAN]: \"wan\",\n  [CardType.TIAO]: \"tiao\",\n  [CardType.FENG]: \"feng\",\n};\n// 卡牌格式 [牌类型, 牌数字]\ntype CardData = [CardType, number]\n\nexport class MahjongModel {\n  public row = 8;\n  public col = 10;\n  public data: MahjongCardData[][] = [];\n\n  public updateRowCol(row: number = 8, col: number = 10): void {\n    this.row = row;\n    this.col = col;\n    this.data = [];\n  }\n\n  // 麻将牌类型集\n  public getMahjongCardList(): CardData[] {\n    const list: CardData[] = [];\n    for (let type of CARD_TYPE_LIST) {\n      for (let num of CARD_NUM_LIST) {\n        list.push([type, num]);\n      }\n    }\n    for (let feng of FENG_TYPE_LIST) {\n      list.push([CardType.FENG, feng]);\n    }\n    return list;\n  }\n\n  private _rowColStrList: string[];\n\n  public getRowColStrList(): string[] {\n    if (!this._rowColStrList) {\n      const rst: string[] = [];\n      for (let i = 0; i < this.row; i++) {\n        for (let j = 0; j < this.col; j++) {\n          rst[i * this.col + j] = i + \"_\" + j;\n        }\n      }\n      this._rowColStrList = rst;\n    }\n    return this._rowColStrList;\n  }\n\n  public getRandomRowCol(): number[] {\n    const list = this.getRowColStrList();\n    const idx = Math.random() * list.length >> 0;\n    const listItem = list.splice(idx, 1)[0];\n    return listItem.split(\"_\").map(item => +item);\n  }\n\n  public getMahjongData(): MahjongCardData[][] {\n    const list = this.getMahjongCardList();\n    for (let item of list) {\n      for (let i = 0; i < CARD_COUNT; i++) {\n        const randomItemAry = this.getRandomRowCol();\n        if (!this.data[randomItemAry[0]]) {\n          this.data[randomItemAry[0]] = [];\n        }\n        const cardData = new MahjongCardData();\n        cardData.updateInfo(randomItemAry[0], randomItemAry[1], item);\n        this.data[randomItemAry[0]][randomItemAry[1]] = cardData;\n      }\n    }\n    return this.data;\n  }\n\n  // 移除牌\n  public deleteCard(index: number): boolean {\n    index += 1;\n    const row = index / 10 >> 0;\n    const col = index % 10 - 1;\n    if (!this.data || !this.data[row]) {\n      return false;\n    }\n    this.data[row][col] = undefined;\n    return true;\n  }\n\n  // 获取点击的牌【上右下左】非空牌的序号 todo 非空牌\n  public getDirectionList(index: number): number[] {\n    const leftIdx = Math.max(0, index - 1);\n    const rightIdx = Math.max(index + 1, this.col - 1);\n    const topIdx = Math.max(0, index - this.col);\n    const bottomIdx = Math.max(index + this.col, this.row - 1);\n    return [topIdx, rightIdx, bottomIdx, leftIdx];\n  }\n\n  // dfs检查是否可以消除 todo\n  public checkDfs(startData: MahjongCardData, targetData: MahjongCardData): boolean {\n    if (!startData || !targetData || !startData.checkSame(targetData)) {\n      return false;\n    }\n    const startPoint = { row: startData.row + 1, col: startData.col + 1 };\n    const targetPoint = { row: targetData.row + 1, col: targetData.col + 1 };\n    const dfsAry: number[][] = [];\n    for (let i = 0; i < this.row + 2; i++) {\n      for (let j = 0; j < this.col + 2; j++) {\n        if (!dfsAry[i]) {\n          dfsAry[i] = [];\n        }\n        if (i === 0 || j === 0 || i === this.row + 1 || j === this.col + 1) {\n          dfsAry[i][j] = 0;\n        } else {\n          const cardData = this.data[i - 1][j - 1];\n          dfsAry[i][j] = cardData ? 1 : 0;\n        }\n      }\n    }\n    // 1.在隔壁\n    // 2.不在隔壁，则四周都是障碍1\n    // 3.不在隔壁，存在可dfs空间0\n    console.log(dfsAry);\n    return false;\n  }\n}\n\n/**单张麻将的数据*/\nexport class MahjongCardData {\n  public row: number;\n  public col: number;\n  public cardData: CardData;\n\n  public updateInfo(row: number, col: number, data: CardData): void {\n    this.row = row;\n    this.col = col;\n    this.cardData = data;\n  }\n\n  public getIcon(): string {\n    if (!this.cardData) {\n      return \"\";\n    }\n    return `mahjong/${CardTypeName[this.cardData[0] + \"\"] + this.cardData[1]}.png`;\n  }\n\n  public checkSame(data: MahjongCardData): boolean {\n    if (!data || !data.cardData) {\n      return false;\n    }\n    return data.cardData[0] === this.cardData[0] && data.cardData[1] === this.cardData[1];\n  }\n}\n","import { MahjongModel } from \"./MahjongModel\";\n\n/**\n * @date 2024/12/22\n */\nexport class MahjongProxy {\n  private static _instance: MahjongProxy;\n  private _model: MahjongModel;\n\n  public static ins(): MahjongProxy {\n    if (!this._instance) {\n      this._instance = new MahjongProxy();\n      window[this._instance.constructor.name] = this._instance;\n    }\n    return this._instance;\n  }\n\n  public get model(): MahjongModel {\n    if (!this._model) {\n      this._model = new MahjongModel();\n    }\n    return this._model;\n  }\n}","import TimeLine = Laya.TimeLine;\r\nimport UIComponent = Laya.UIComponent;\r\nimport Handler = Laya.Handler;\r\nimport Event = Laya.Event;\r\n\r\n/**\r\n * @date 2024/12/23\r\n */\r\nexport default class ComUtils {\r\n  /** 组件抖动 */\r\n  public static setTween(box: UIComponent, isTween = true, callback?: Handler): TimeLine | undefined {\r\n    if (!box) {\r\n      return undefined;\r\n    }\r\n    let timeLine = <TimeLine>box[\"_timeLine_\"];\r\n    if (timeLine) {\r\n      timeLine.reset();\r\n      if (!isTween) {\r\n        timeLine.destroy();\r\n        return undefined;\r\n      }\r\n    } else {\r\n      box[\"_timeLine_\"] = timeLine = new TimeLine();\r\n    }\r\n    timeLine.to(box, { rotation: 10 }, 100)\r\n      .to(box, { rotation: -10 }, 100)\r\n      .to(box, { rotation: 5 }, 100)\r\n      .to(box, { rotation: -5 }, 100)\r\n      .to(box, { rotation: 0 }, 50)\r\n      .play();\r\n    timeLine.on(Event.COMPLETE, this, () => {\r\n      if (callback) {\r\n        callback.run();\r\n      }\r\n    });\r\n    return timeLine;\r\n  }\r\n}","import { ui } from \"@ui/layaMaxUI\";\nimport { MahjongProxy } from \"./MahjongProxy\";\nimport { MahjongCardData } from \"./MahjongModel\";\nimport ComUtils from \"../../base/utils/ComUtils\";\nimport List = Laya.List;\nimport Handler = Laya.Handler;\nimport Box = Laya.Box;\nimport Image = Laya.Image;\nimport Event = Laya.Event;\n\ntype BoxCard = Box & {\n  boxCard: Box & {\n    img: Image;\n  }\n}\n\n/**\n * @date 2024/12/22\n */\nexport default class MahjongMdr extends ui.modules.mahjong.MahjongUI {\n  private _proxy: MahjongProxy;\n  private _list: List;\n  private _preIdx = -1;\n\n  constructor() {\n    super();\n    this._proxy = MahjongProxy.ins();\n  }\n\n  createChildren() {\n    super.createChildren();\n    this._list = <List>this.getChildByName(\"listItem\");\n    this._list.renderHandler = Handler.create(this, this.onRenderListItem, undefined, false);\n\n    Laya.loader.load(\"res/atlas/mahjong.atlas\", Laya.Handler.create(this, this.onLoadedSuccess));\n  }\n\n  onOpened(param: any) {\n    super.onOpened(param);\n  }\n\n  onClosed(type?: string) {\n    super.onClosed(type);\n    this._preIdx = -1;\n  }\n\n  private onLoadedSuccess(): void {\n    console.log(\"11111 onLoadedSuccess\");\n    const list = this._proxy.model.getMahjongData();\n    this._list.array = list.reduce((a, b) => a.concat(b));\n    console.log(list);\n  }\n\n  private onRenderListItem(item: BoxCard, index: number): void {\n    const img = <Image>item.getChildByName(\"boxCard\").getChildByName(\"img\");\n    const data: MahjongCardData = item.dataSource;\n    if (!data) {\n      img.skin = \"\";\n      return;\n    }\n    item.tag = data;\n    img.skin = data.getIcon();\n\n    item.on(Event.CLICK, this, this.onClickItem, [index]);\n    item.on(Event.MOUSE_DOWN, this, this.onClickMouseDown, [index]);\n    item.on(Event.MOUSE_UP, this, this.onClickMouseUp, [index]);\n    item.on(Event.MOUSE_OUT, this, this.onClickMouseUp, [index]);\n  }\n\n  private onClickItem(index: number): void {\n    if (this._preIdx > -1 && index !== this._preIdx) {\n      const curItemData: MahjongCardData = this._list.getItem(index);\n      const preItemData: MahjongCardData = this._list.getItem(this._preIdx);\n      const curItem = <BoxCard>this._list.getCell(index).getChildByName(\"boxCard\");\n      const preItem = <BoxCard>this._list.getCell(this._preIdx).getChildByName(\"boxCard\");\n      if (curItemData.checkSame(preItemData)) {\n        this.clearCardItem(curItem, index);\n        this.clearCardItem(preItem, this._preIdx);\n        // console.log(11111, index, this._preIdx, curItemData, preItemData);\n      } else {\n        ComUtils.setTween(curItem);\n        ComUtils.setTween(preItem);\n      }\n      this._preIdx = -1;\n    } else {\n      this._preIdx = index;\n      const item = <BoxCard>this._list.getCell(index).getChildByName(\"boxCard\");\n      ComUtils.setTween(item);\n    }\n  }\n\n  private clearCardItem(box: BoxCard, index: number): void {\n    ComUtils.setTween(box, true, Handler.create(this, () => {\n      const curImg = box.getChildByName(\"img\") as Image;\n      curImg.skin = \"\";\n      this._proxy.model.deleteCard(index);\n    }));\n  }\n\n  private onClickMouseDown(index: number): void {\n    //\n  }\n\n  private onClickMouseUp(index: number): void {\n    //\n  }\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport MahjongMdr from \"./modules/mahjong/MahjongMdr\"\n/*\n* 游戏初始化配置;\n*/\nexport default class GameConfig{\n    static width:number=640;\n    static height:number=1136;\n    static scaleMode:string=\"fixedauto\";\n    static screenMode:string=\"none\";\n    static alignV:string=\"top\";\n    static alignH:string=\"left\";\n    static startScene:any=\"modules/mahjong/Mahjong.scene\";\n    static sceneRoot:string=\"\";\n    static debug:boolean=false;\n    static stat:boolean=false;\n    static physicsDebug:boolean=false;\n    static exportSceneToJson:boolean=true;\n    constructor(){}\n    static init(){\n        var reg: Function = Laya.ClassUtils.regClass;\n        reg(\"modules/mahjong/MahjongMdr.ts\",MahjongMdr);\n    }\n}\nGameConfig.init();","import GameConfig from \"./GameConfig\";\nclass Main {\n\tconstructor() {\n\t\t//根据IDE设置初始化引擎\t\t\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\n\t\tLaya.stage.alignV = GameConfig.alignV;\n\t\tLaya.stage.alignH = GameConfig.alignH;\n\t\t//兼容微信不支持加载scene后缀场景\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\n\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\n\t\tif (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\n\t\tif (GameConfig.stat) Laya.Stat.show();\n\t\tLaya.alertGlobalError(true);\n\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\n\t}\n\n\tonVersionLoaded(): void {\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\n\t}\n\n\tonConfigLoaded(): void {\n\t\t//加载IDE指定的场景\n\t\tGameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\n\t}\n}\n//激活启动类\nnew Main();\n"],"names":["Event"],"mappings":"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"}